## <center> ã€Š2025å¤§æ¨¡å‹Agentæ™ºèƒ½ä½“å¼€å‘å®æˆ˜ã€‹ä½“éªŒè¯¾
## <center> Ch 1.DeepSeek v3 APIæ¥å…¥æŒ‡å—


```python
import os
from IPython.display import display, Code, Markdown
import requests
import json
```

- DeepSeek v3è´¦å·æ³¨å†Œä¸APIè·å–

DeepSeekå®˜ç½‘ï¼šhttps://www.deepseek.com/

<center><img src="https://ml2022.oss-cn-hangzhou.aliyuncs.com/img/image-20250107155848673.png" alt="image-20250107155848673" style="zoom:33%;" />

<center><img src="https://ml2022.oss-cn-hangzhou.aliyuncs.com/img/image-20250107155925049.png" alt="image-20250107155925049" style="zoom:25%;" />

æ–°ç”¨æˆ·æ³¨å†Œå³èµ é€10å…ƒé¢åº¦ï¼Œçº¦500ä¸‡tokené¢åº¦ï¼š

<center><img src="https://ml2022.oss-cn-hangzhou.aliyuncs.com/img/image-20250107160101536.png" alt="image-20250107160101536" style="zoom:33%;" />

å¯¹æ¯”GPT4oä»·æ ¼ï¼Œçº¦é™ä½90%ä»¥ä¸Šï¼šè¾“å…¥ä»·æ ¼ä¸ºGPT4oçš„6%ï¼Œè¾“å‡ºä»·æ ¼å›´æ®´GPT4oçš„3%

<center><img src="https://ml2022.oss-cn-hangzhou.aliyuncs.com/img/image-20250107160418665.png" alt="image-20250107160418665" style="zoom: 50%;" />

ä¸”APIè°ƒç”¨ä¸é™é€Ÿï¼š

<center><img src="https://ml2022.oss-cn-hangzhou.aliyuncs.com/img/image-20250107160659366.png" alt="image-20250107160659366" style="zoom:33%;" />

æœ€å…³é”®çš„æ˜¯ï¼Œè°ƒç”¨é£æ ¼å’ŒOpenAIå®Œå…¨ä¸€è‡´ï¼šFunction callingã€æç¤ºè¯ç¼“å­˜ã€Json Outputç­‰åŠŸèƒ½å®Œå…¨ç›¸åŒï¼š

<center><img src="https://ml2022.oss-cn-hangzhou.aliyuncs.com/img/image-20250107161014344.png" alt="image-20250107161014344" style="zoom:33%;" />

<center><img src="https://ml2022.oss-cn-hangzhou.aliyuncs.com/img/image-20250107161058708.png" alt="image-20250107161058708" style="zoom:33%;" />

- DeepSeek v3è°ƒç”¨æµç¨‹

å¯¹æ¯”OpenAI GPT4oè°ƒç”¨æµç¨‹ï¼š


```python
!pip install openai
```

    Requirement already satisfied: openai in /root/anaconda3/lib/python3.12/site-packages (1.57.2)
    Requirement already satisfied: anyio<5,>=3.5.0 in /root/anaconda3/lib/python3.12/site-packages (from openai) (4.2.0)
    Requirement already satisfied: distro<2,>=1.7.0 in /root/anaconda3/lib/python3.12/site-packages (from openai) (1.9.0)
    Requirement already satisfied: httpx<1,>=0.23.0 in /root/anaconda3/lib/python3.12/site-packages (from openai) (0.28.1)
    Requirement already satisfied: jiter<1,>=0.4.0 in /root/anaconda3/lib/python3.12/site-packages (from openai) (0.8.2)
    Requirement already satisfied: pydantic<3,>=1.9.0 in /root/anaconda3/lib/python3.12/site-packages (from openai) (2.5.3)
    Requirement already satisfied: sniffio in /root/anaconda3/lib/python3.12/site-packages (from openai) (1.3.0)
    Requirement already satisfied: tqdm>4 in /root/anaconda3/lib/python3.12/site-packages (from openai) (4.66.4)
    Requirement already satisfied: typing-extensions<5,>=4.11 in /root/anaconda3/lib/python3.12/site-packages (from openai) (4.11.0)
    Requirement already satisfied: idna>=2.8 in /root/anaconda3/lib/python3.12/site-packages (from anyio<5,>=3.5.0->openai) (3.7)
    Requirement already satisfied: certifi in /root/anaconda3/lib/python3.12/site-packages (from httpx<1,>=0.23.0->openai) (2024.6.2)
    Requirement already satisfied: httpcore==1.* in /root/anaconda3/lib/python3.12/site-packages (from httpx<1,>=0.23.0->openai) (1.0.7)
    Requirement already satisfied: h11<0.15,>=0.13 in /root/anaconda3/lib/python3.12/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->openai) (0.14.0)
    Requirement already satisfied: annotated-types>=0.4.0 in /root/anaconda3/lib/python3.12/site-packages (from pydantic<3,>=1.9.0->openai) (0.6.0)
    Requirement already satisfied: pydantic-core==2.14.6 in /root/anaconda3/lib/python3.12/site-packages (from pydantic<3,>=1.9.0->openai) (2.14.6)
    [33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv[0m[33m
    [0m


```python
import openai
```


```python
openai.__version__
```




    '1.57.2'




```python
from openai import OpenAI
```


```python
api_key = 'YOUR_API_KEY'
```


```python
# å®ä¾‹åŒ–å®¢æˆ·ç«¯
client = OpenAI(api_key=api_key, 
                base_url="https://ai.devtool.tech/proxy/v1")
```


```python
# è°ƒç”¨ GPT-4o-mini æ¨¡å‹
response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[
        {"role": "user", "content": "ä½ å¥½ï¼Œå¥½ä¹…ä¸è§!"}
    ]
)
```

ä¸Šè¿°ä»£ç ä¸­ model å‚æ•°æŒ‡å®šäº†ä½¿ç”¨çš„æ¨¡å‹ï¼ˆgpt-4o-miniï¼‰ï¼Œmessages åˆ—è¡¨å®šä¹‰äº†å¯¹è¯å†…å®¹ï¼Œå…¶ä¸­ role ä¸º user è¡¨ç¤ºç”¨æˆ·çš„è¾“å…¥å†…å®¹ã€‚


```python
# è¾“å‡ºç”Ÿæˆçš„å“åº”å†…å®¹
print(response.choices[0].message.content)
```

    ä½ å¥½ï¼å¾ˆé«˜å…´å†æ¬¡è§åˆ°ä½ ï¼ä½ æœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ



```python
response
```




    ChatCompletion(id='chatcmpl-AmyljFoOE3EPBcKgrc2MxlUTs4Nfe', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='ä½ å¥½ï¼å¾ˆé«˜å…´å†æ¬¡è§åˆ°ä½ ï¼ä½ æœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ', refusal=None, role='assistant', audio=None, function_call=None, tool_calls=None))], created=1736236703, model='gpt-4o-mini-2024-07-18', object='chat.completion', service_tier=None, system_fingerprint='fp_d02d531b47', usage=CompletionUsage(completion_tokens=15, prompt_tokens=13, total_tokens=28, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))



DeepSeekv3è°ƒç”¨æµç¨‹:

é¦–å…ˆåœ¨å®˜ç½‘ç”³è¯·API-KEYï¼šhttps://platform.deepseek.com/api_keys

<center><img src="https://ml2022.oss-cn-hangzhou.aliyuncs.com/img/image-20250107162553252.png" alt="image-20250107162553252" style="zoom:33%;" />

<center><img src="https://ml2022.oss-cn-hangzhou.aliyuncs.com/img/image-20250107162642821.png" alt="image-20250107162642821" style="zoom:33%;" />


```python
ds_api_key = 'YOUR_DS_API_KEY'
```


```python
# å®ä¾‹åŒ–å®¢æˆ·ç«¯
client = OpenAI(api_key=ds_api_key, 
                base_url="https://api.deepseek.com")
```


```python
# è°ƒç”¨ deepseekv3 æ¨¡å‹
response = client.chat.completions.create(
    model="deepseek-chat",
    messages=[
        {"role": "user", "content": "ä½ å¥½ï¼Œå¥½ä¹…ä¸è§!"}
    ]
)
```


```python
# è¾“å‡ºç”Ÿæˆçš„å“åº”å†…å®¹
print(response.choices[0].message.content)
```

    ä½ å¥½ï¼å¥½ä¹…ä¸è§ï¼æœ€è¿‘è¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿæœ‰ä»€ä¹ˆæƒ³èŠçš„å—ï¼Ÿ



```python
response
```




    ChatCompletion(id='1fdbc70b-acbf-4c9a-a895-d26bd69ad531', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='ä½ å¥½ï¼å¥½ä¹…ä¸è§ï¼æœ€è¿‘è¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿæœ‰ä»€ä¹ˆæƒ³èŠçš„å—ï¼Ÿ', refusal=None, role='assistant', audio=None, function_call=None, tool_calls=None))], created=1736238514, model='deepseek-chat', object='chat.completion', service_tier=None, system_fingerprint='fp_3a5770e1b4', usage=CompletionUsage(completion_tokens=14, prompt_tokens=8, total_tokens=22, completion_tokens_details=None, prompt_tokens_details=None, prompt_cache_hit_tokens=0, prompt_cache_miss_tokens=8))



ä¸€æ ·çš„SDKï¼Œä»£è¡¨DeepSeekæ¨¡å‹é‡‡ç”¨å’ŒGPTæ¨¡å‹å®Œå…¨çš„å‚æ•°ä½“ç³»ï¼š


```python
client.chat.completions.create?
```


    [0;31mSignature:[0m
    [0mclient[0m[0;34m.[0m[0mchat[0m[0;34m.[0m[0mcompletions[0m[0;34m.[0m[0mcreate[0m[0;34m([0m[0;34m[0m
    [0;34m[0m    [0;34m*[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mmessages[0m[0;34m:[0m [0;34m'Iterable[ChatCompletionMessageParam]'[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mmodel[0m[0;34m:[0m [0;34m'Union[str, ChatModel]'[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0maudio[0m[0;34m:[0m [0;34m'Optional[ChatCompletionAudioParam] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mfrequency_penalty[0m[0;34m:[0m [0;34m'Optional[float] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mfunction_call[0m[0;34m:[0m [0;34m'completion_create_params.FunctionCall | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mfunctions[0m[0;34m:[0m [0;34m'Iterable[completion_create_params.Function] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mlogit_bias[0m[0;34m:[0m [0;34m'Optional[Dict[str, int]] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mlogprobs[0m[0;34m:[0m [0;34m'Optional[bool] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mmax_completion_tokens[0m[0;34m:[0m [0;34m'Optional[int] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mmax_tokens[0m[0;34m:[0m [0;34m'Optional[int] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mmetadata[0m[0;34m:[0m [0;34m'Optional[Dict[str, str]] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mmodalities[0m[0;34m:[0m [0;34m'Optional[List[ChatCompletionModality]] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mn[0m[0;34m:[0m [0;34m'Optional[int] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mparallel_tool_calls[0m[0;34m:[0m [0;34m'bool | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mprediction[0m[0;34m:[0m [0;34m'Optional[ChatCompletionPredictionContentParam] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mpresence_penalty[0m[0;34m:[0m [0;34m'Optional[float] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mresponse_format[0m[0;34m:[0m [0;34m'completion_create_params.ResponseFormat | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mseed[0m[0;34m:[0m [0;34m'Optional[int] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mservice_tier[0m[0;34m:[0m [0;34m"Optional[Literal['auto', 'default']] | NotGiven"[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mstop[0m[0;34m:[0m [0;34m'Union[Optional[str], List[str]] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mstore[0m[0;34m:[0m [0;34m'Optional[bool] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mstream[0m[0;34m:[0m [0;34m'Optional[Literal[False]] | Literal[True] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mstream_options[0m[0;34m:[0m [0;34m'Optional[ChatCompletionStreamOptionsParam] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mtemperature[0m[0;34m:[0m [0;34m'Optional[float] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mtool_choice[0m[0;34m:[0m [0;34m'ChatCompletionToolChoiceOptionParam | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mtools[0m[0;34m:[0m [0;34m'Iterable[ChatCompletionToolParam] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mtop_logprobs[0m[0;34m:[0m [0;34m'Optional[int] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mtop_p[0m[0;34m:[0m [0;34m'Optional[float] | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0muser[0m[0;34m:[0m [0;34m'str | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mextra_headers[0m[0;34m:[0m [0;34m'Headers | None'[0m [0;34m=[0m [0;32mNone[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mextra_query[0m[0;34m:[0m [0;34m'Query | None'[0m [0;34m=[0m [0;32mNone[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mextra_body[0m[0;34m:[0m [0;34m'Body | None'[0m [0;34m=[0m [0;32mNone[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m    [0mtimeout[0m[0;34m:[0m [0;34m'float | httpx.Timeout | None | NotGiven'[0m [0;34m=[0m [0mNOT_GIVEN[0m[0;34m,[0m[0;34m[0m
    [0;34m[0m[0;34m)[0m [0;34m->[0m [0;34m'ChatCompletion | Stream[ChatCompletionChunk]'[0m[0;34m[0m[0;34m[0m[0m
    [0;31mDocstring:[0m <no docstring>
    [0;31mFile:[0m      ~/anaconda3/lib/python3.12/site-packages/openai/resources/chat/completions.py
    [0;31mType:[0m      method


DeepSeekç›®å‰æ”¯æŒçš„æ¨¡å‹èŒƒå›´ï¼š


```python
models_list = client.models.list()
```


```python
models_list.data
```




    [Model(id='deepseek-chat', created=None, object='model', owned_by='deepseek'),
     Model(id='deepseek-coder', created=None, object='model', owned_by='deepseek')]



&emsp;&emsp;DeepSeek v3 æ¨¡å‹å±äºèŠå¤©è¡¥å…¨ï¼ˆchat completionï¼‰æ¨¡å‹ï¼Œæ¨¡å‹æä¾›äº†å¤šç§å‚æ•°ï¼Œå¸®åŠ©å¼€å‘è€…å®šåˆ¶åŒ–æ¨¡å‹çš„ç”Ÿæˆè¡Œä¸ºã€‚ä»¥ä¸‹æ˜¯å¯¹ä¸»è¦å‚æ•°çš„è¯¦ç»†è§£é‡Šï¼Œä»¥åŠå¦‚ä½•åœ¨ Python ä¸­ä½¿ç”¨è¿™äº›å‚æ•°è¿›è¡Œè¯·æ±‚ã€‚

#### 4.1 `messages` (å¿…å¡«)

&emsp;&emsp;`messages` å‚æ•°æ˜¯ DeepSeek v3  æ¨¡å‹ API ä¸­å¿…å¡«çš„å‚æ•°ä¹‹ä¸€ï¼Œç”¨äºå®šä¹‰èŠå¤©ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬ç”¨æˆ·çš„è¾“å…¥ã€ç³»ç»Ÿçš„æŒ‡ä»¤ã€åŠ©æ‰‹çš„å›å¤ç­‰ã€‚é€šè¿‡ `messages` æ•°ç»„ï¼Œæ¨¡å‹å¯ä»¥ç†è§£å½“å‰å¯¹è¯çš„èƒŒæ™¯ï¼Œä»è€Œç”Ÿæˆæ›´åŠ è¿è´¯çš„å“åº”ã€‚æ ¹æ®ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼Œ`messages` åŒ…å«å¤šç§ç±»å‹çš„æ¶ˆæ¯ï¼Œä¾‹å¦‚ `system message`ã€`user message` å’Œ `assistant message`ã€‚ä¸‹é¢æ˜¯å¯¹ `messages` å‚æ•°åŠå…¶å„ä¸ªå­ç±»å‹çš„è¯¦ç»†è§£é‡Šã€‚

##### 4.1.1 `System message`
&emsp;&emsp;`system message` ç”¨äºè®¾ç½®ç³»ç»Ÿæ¶ˆæ¯ï¼Œé€šå¸¸ç”±å¼€å‘è€…è®¾å®šï¼Œä»¥æŒ‡å¯¼æ¨¡å‹å¦‚ä½•è¿›è¡Œå¯¹è¯ã€‚è¿™ç±»æ¶ˆæ¯å¯ä»¥å®šä¹‰è§„åˆ™æˆ–çº¦æŸï¼Œå¹¶æä¾›æœ‰å…³å¯¹è¯çš„èƒŒæ™¯ä¿¡æ¯ã€‚

- **`content`** (å¿…å¡«)ï¼šç³»ç»Ÿæ¶ˆæ¯çš„å†…å®¹ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°ç»„ã€‚å¦‚æœæ˜¯æ•°ç»„ï¼Œå¯èƒ½åŒ…å«å¤šä¸ªç±»å‹çš„å†…å®¹ï¼ˆå¦‚æ–‡æœ¬ã€å›¾åƒï¼‰ã€‚
- **`role`** (å¿…å¡«)ï¼šæ­¤å¤„è§’è‰²ä¸º `system`ï¼Œè¡¨æ˜è¿™æ˜¯ç³»ç»Ÿå‘å‡ºçš„æ¶ˆæ¯ã€‚
- **`name`** (å¯é€‰)ï¼šæä¾›ç³»ç»Ÿæ¶ˆæ¯å‘é€è€…çš„åç§°ï¼Œå°¤å…¶é€‚ç”¨äºåŒºåˆ†å¤šä¸ªå…·æœ‰ç›¸åŒè§’è‰²çš„å‚ä¸è€…ã€‚

**ç¤ºä¾‹**ï¼š
```python
system_message = {
    "role": "system",
    "content": "ä½ æ˜¯ä¸€ä½åŠ©äººä¸ºä¹çš„åŠ©æ‰‹ã€‚"
}
```


```python
# ä»¥ä¸‹ä»£ç çš„æ³¨é‡Šç”±MateGenç”Ÿæˆ:
# å®šä¹‰ä¸€ä¸ªå­—å…¸ï¼Œé”®ä¸º'system_message'ï¼Œç”¨äºå­˜å‚¨ç³»ç»Ÿæ¶ˆæ¯
system_message = {
    # 'role'é”®å¯¹åº”çš„å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"system"ï¼Œè¡¨ç¤ºæ¶ˆæ¯çš„å‘é€è€…æ˜¯ç³»ç»Ÿ
    "role": "system",
    # 'content'é”®å¯¹åº”çš„å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºç³»ç»Ÿæ¶ˆæ¯çš„å†…å®¹
    "content": "ä½ æ˜¯ä¸€ä½å¤§å­¦æ•™æˆã€‚"
}
```

##### 4.1.2 `User message`
`user message` è¡¨ç¤ºç”¨æˆ·å‘ç»™æ¨¡å‹çš„æ¶ˆæ¯ï¼Œæ˜¯å¯¹è¯çš„æ ¸å¿ƒéƒ¨åˆ†ä¹‹ä¸€ã€‚å®ƒå®šä¹‰äº†ç”¨æˆ·çš„è¾“å…¥å†…å®¹ï¼Œæ¨¡å‹æ ¹æ®è¿™äº›å†…å®¹ç”Ÿæˆå“åº”ã€‚

- **`content`** (å¿…å¡«)ï¼šç”¨æˆ·æ¶ˆæ¯çš„å†…å®¹ï¼Œé€šå¸¸ä¸ºæ–‡æœ¬æˆ–å›¾åƒé“¾æ¥çš„æ•°ç»„ã€‚å¯¹äºæ”¯æŒå›¾åƒè¾“å…¥çš„æ¨¡å‹ï¼Œå¦‚ DeepSeek v2.5 ï¼Œè¿˜å¯ä»¥ä¼ é€’å›¾åƒã€‚
  - **æ–‡æœ¬å†…å®¹**ï¼šå•çº¯çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ã€‚
  - **æ•°ç»„å½¢å¼çš„å†…å®¹**ï¼šç”±æ–‡æœ¬æˆ–å›¾åƒé“¾æ¥ç»„æˆçš„æ•°ç»„ï¼Œå¯ä»¥åŒæ—¶ä¼ é€’å¤šå¼ å›¾åƒæˆ–å¤šæ®µæ–‡æœ¬å†…å®¹ã€‚
- **`role`** (å¿…å¡«)ï¼šè§’è‰²ä¸º `user`ï¼Œè¡¨ç¤ºè¯¥æ¶ˆæ¯æ¥è‡ªç”¨æˆ·ã€‚
- **`name`** (å¯é€‰)ï¼šå¯ä»¥ä¸ºç”¨æˆ·æŒ‡å®šä¸€ä¸ªåç§°ï¼Œç”¨äºåŒºåˆ†å¤šä¸ªå…·æœ‰ç›¸åŒè§’è‰²çš„ç”¨æˆ·ã€‚

**ç¤ºä¾‹**ï¼š
```python
user_message = {
    "role": "user",
    "content": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸‹ä½ è‡ªå·±ã€‚"
}
```

å¦‚æœä¼ é€’å¤šä¸ªå†…å®¹ï¼ˆå¦‚å›¾åƒå’Œæ–‡æœ¬ï¼‰ï¼š
```python
user_message_with_image = {
    "role": "user",
    "content": [
        {"type": "text", "text": "ä½ èƒ½å¸®æˆ‘ä»‹ç»ä¸‹è¿™å¼ å›¾ç‰‡é‡Œé¢çš„å†…å®¹ä¹ˆï¼Ÿ"},
        {"type": "image_url", 
         "image_url": {
                        "url": "https://ml2022.oss-cn-hangzhou.aliyuncs.com/img/image-20241009205714055.png",
                    }
        }
    ]
}
```


```python
# åˆ›å»ºç”¨æˆ·æ¶ˆæ¯
user_message = {
    "role": "user",
    "content": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸‹ä½ è‡ªå·±ã€‚"
}
```


```python
# è°ƒç”¨ GPT-4o-mini æ¨¡å‹
response = client.chat.completions.create(
    model="deepseek-chat",
    messages=[
        system_message,
        user_message
    ]
)
```


```python
# è¾“å‡ºç”Ÿæˆçš„å“åº”å†…å®¹
print(response.choices[0].message.content)
```

    ä½ å¥½ï¼æˆ‘æ˜¯ä¸€ä½å¤§å­¦æ•™æˆï¼Œä¸“æ³¨äºå¤šä¸ªå­¦ç§‘é¢†åŸŸçš„ç ”ç©¶ä¸æ•™å­¦ã€‚æˆ‘çš„å·¥ä½œä¸»è¦åŒ…æ‹¬æ•™æˆæœ¬ç§‘ç”Ÿå’Œç ”ç©¶ç”Ÿè¯¾ç¨‹ï¼ŒæŒ‡å¯¼å­¦ç”Ÿçš„ç ”ç©¶é¡¹ç›®ï¼Œä»¥åŠè¿›è¡Œå­¦æœ¯ç ”ç©¶ã€‚æˆ‘è‡´åŠ›äºé€šè¿‡æ•™è‚²å’Œç ”ç©¶æ¨åŠ¨çŸ¥è¯†çš„è¾¹ç•Œï¼Œå¹¶å¸®åŠ©å­¦ç”Ÿå‘å±•ä»–ä»¬çš„æ‰¹åˆ¤æ€§æ€ç»´å’Œåˆ›æ–°èƒ½åŠ›ã€‚æ­¤å¤–ï¼Œæˆ‘ä¹Ÿå‚ä¸å­¦æœ¯ä¼šè®®å’Œç ”è®¨ä¼šï¼Œä¸åŒè¡Œäº¤æµæœ€æ–°çš„ç ”ç©¶æˆæœå’Œæ•™å­¦æ–¹æ³•ã€‚å¦‚æœä½ æœ‰ä»»ä½•å­¦æœ¯ä¸Šçš„é—®é¢˜æˆ–éœ€è¦æŒ‡å¯¼ï¼Œæˆ‘å¾ˆä¹æ„æä¾›å¸®åŠ©ã€‚


- æ„å»ºå¤šè½®å¯¹è¯æœºå™¨äºº


```python
import re
from IPython.display import display, Code, Markdown
```


```python
def extract_url_and_text(input_text):
    """
    æå–ç”¨æˆ·è¾“å…¥ä¸­çš„ URL å’Œæè¿°æ–‡æœ¬ã€‚
    
    å‚æ•°:
    input_text (str): ç”¨æˆ·çš„è¾“å…¥æ–‡æœ¬ï¼Œå¯èƒ½åŒ…å« URL å’Œæè¿°æ€§æ–‡æœ¬ã€‚

    è¿”å›:
    tuple: åŒ…å«æè¿°æ€§æ–‡æœ¬å’Œæå–åˆ°çš„ URLï¼Œå¦‚æœæ²¡æœ‰ URLï¼Œåˆ™è¿”å› (input_text, None)ã€‚
    """
    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æµ‹ URL
    url_pattern = re.compile(r'(https?://[^\s]+)')
    url_match = url_pattern.search(input_text)
    
    if url_match:
        # æå– URL å¹¶å°†å…¶ä»åŸæ–‡æœ¬ä¸­ç§»é™¤
        url = url_match.group(0)
        description = input_text.replace(url, '').strip()  # å»æ‰ URL åå‰©ä¸‹çš„æ–‡æœ¬
        return description, url
    else:
        return input_text, None
```


```python
def create_message(role, content):
    """
    åˆ›å»ºæ ‡å‡†çš„æ¶ˆæ¯æ ¼å¼ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€åŠ©æ‰‹æˆ–ç³»ç»Ÿæ¶ˆæ¯ã€‚

    å‚æ•°:
    role (str): æ¶ˆæ¯çš„è§’è‰²ï¼Œå€¼ä¸º "user"ã€"assistant" æˆ– "system"ã€‚
    content (str or list): æ¶ˆæ¯çš„å†…å®¹ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼ˆæ–‡æœ¬ï¼‰æˆ–åŒ…å«æ–‡æœ¬å’Œå›¾åƒçš„æ•°ç»„ã€‚

    è¿”å›:
    dict: ç¬¦åˆ GPT-4o API è¦æ±‚çš„æ¶ˆæ¯æ ¼å¼ã€‚
    """
    return {
        "role": role,
        "content": content
    }
```


```python
def process_user_input(input_text):
    """
    æ ¹æ®ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œçµæ´»åˆ¤æ–­æ˜¯å¦åŒ…å« URLï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„æ¶ˆæ¯æ ¼å¼ã€‚

    å‚æ•°:
    input_text (str): ç”¨æˆ·çš„è¾“å…¥æ–‡æœ¬ã€‚

    è¿”å›:
    dict: ç”Ÿæˆçš„ç”¨æˆ·æ¶ˆæ¯ï¼ŒåŒ…å«æ–‡æœ¬æˆ–å›¾ç‰‡ URLã€‚
    """
    description, url = extract_url_and_text(input_text)
    
    if url:
        # å¦‚æœæ£€æµ‹åˆ° URLï¼Œç”Ÿæˆå¸¦å›¾åƒé“¾æ¥çš„æ¶ˆæ¯
        if not description:
            description = "è¯·å¸®æˆ‘åˆ†æè¿™å¼ å›¾ç‰‡çš„å†…å®¹ã€‚"  # å¦‚æœæ²¡æœ‰æè¿°ï¼Œæä¾›é»˜è®¤æè¿°
        return create_user_message_with_image(description, url)
    else:
        # å¦åˆ™ç”Ÿæˆæ™®é€šçš„æ–‡æœ¬æ¶ˆæ¯
        return create_message("user", description)
```


```python
def create_user_message_with_image(text, image_url):
    """
    åˆ›å»ºåŒ…å«æ–‡æœ¬å’Œå›¾åƒé“¾æ¥çš„ç”¨æˆ·æ¶ˆæ¯ã€‚

    å‚æ•°:
    text (str): ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬å†…å®¹ã€‚
    image_url (str): å›¾åƒçš„ URL åœ°å€ã€‚

    è¿”å›:
    dict: åŒ…å«æ–‡æœ¬å’Œå›¾åƒçš„ç”¨æˆ·æ¶ˆæ¯ã€‚
    """
    return {
        "role": "user",
        "content": [
            {"type": "text", "text": text},
            {"type": "image_url", "image_url": {"url": image_url}}
        ]
    }
```


```python
def chat_with_DeepSeek(client, messages):
    """
    ä½¿ç”¨ DeepSeek æ¨¡å‹è¿›è¡Œå¤šè½®å¯¹è¯çš„æ ¸å¿ƒå‡½æ•°ã€‚

    å‚æ•°:
    client (OpenAI): å®ä¾‹åŒ–çš„ OpenAI å®¢æˆ·ç«¯ã€‚
    messages (list): åŒ…å«å¯¹è¯ä¸Šä¸‹æ–‡çš„æ¶ˆæ¯åˆ—è¡¨ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€åŠ©æ‰‹å’Œç³»ç»Ÿæ¶ˆæ¯ã€‚

    è¿”å›:
    str: GPT-4o æ¨¡å‹ç”Ÿæˆçš„å›å¤å†…å®¹ã€‚
    """
    response = client.chat.completions.create(
        model="deepseek-chat",  # ä½¿ç”¨ deepseek-chat æ¨¡å‹
        messages=messages
    )
    
    # æå–å¹¶è¿”å›åŠ©æ‰‹ç”Ÿæˆçš„å›å¤å†…å®¹
    return response.choices[0].message.content
```


```python
def multi_round_chat():
    """
    å¤šè½®å¯¹è¯æœºå™¨äººç¤ºä¾‹å‡½æ•°ï¼Œæ¼”ç¤ºå¦‚ä½•é€šè¿‡æ•è·ç”¨æˆ·è¾“å…¥ï¼Œå¹¶æ ¹æ®æ˜¯å¦åŒ…å« URL åšå‡ºå“åº”ã€‚

    """
    # åˆå§‹åŒ–æ¶ˆæ¯åˆ—è¡¨ï¼ŒåŒ…å«ç³»ç»Ÿæ¶ˆæ¯
    messages = []
    
    # åˆ›å»ºç³»ç»Ÿæ¶ˆæ¯ï¼Œè®¾ç½®å¯¹è¯çš„ä¸Šä¸‹æ–‡
    system_message = create_message("system", "You are a helpful assistant.")
    messages.append(system_message)
    
    while True:
        # æ•è·ç”¨æˆ·è¾“å…¥
        user_input = input("User: ")
        
        # å¤„ç†ç”¨æˆ·è¾“å…¥å¹¶ç”Ÿæˆç›¸åº”çš„æ¶ˆæ¯
        user_message = process_user_input(user_input)
        messages.append(user_message)
        
        # è°ƒç”¨ GPT-4o æ¨¡å‹è¿›è¡Œå›å¤
        assistant_reply = chat_with_DeepSeek(client, messages)
        display(Markdown(f"Assistant: {assistant_reply}"))
        
        # å°†åŠ©æ‰‹å›å¤æ·»åŠ åˆ°æ¶ˆæ¯åˆ—è¡¨
        messages.append(create_message("assistant", assistant_reply))
        
        # æä¾›é€€å‡ºæœºåˆ¶ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥ 'exit' é€€å‡ºå¯¹è¯
        if user_input.lower() == 'exit':
            print("å¯¹è¯ç»“æŸã€‚")
            break
```


```python
# è°ƒç”¨å¤šè½®å¯¹è¯æœºå™¨äººå‡½æ•°
multi_round_chat()
```

    User:  ä½ å¥½ï¼Œå¥½ä¹…ä¸è§ï¼



Assistant: ä½ å¥½ï¼å¥½ä¹…ä¸è§ï¼Œå¾ˆé«˜å…´å†æ¬¡è§åˆ°ä½ ï¼æœ€è¿‘è¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿæœ‰ä»€ä¹ˆæ–°é²œäº‹æƒ³åˆ†äº«å—ï¼Ÿ


    User:  æˆ‘å«é™ˆæ˜ï¼Œè¯·ä»‹ç»ä¸‹ä½ è‡ªå·±



Assistant: é™ˆæ˜ï¼Œä½ å¥½ï¼æˆ‘æ˜¯ä¸€ä¸ªäººå·¥æ™ºèƒ½åŠ©æ‰‹ï¼Œä¸“é—¨è®¾è®¡æ¥æä¾›ä¿¡æ¯ã€è§£ç­”ç–‘é—®å’ŒååŠ©è§£å†³é—®é¢˜ã€‚æˆ‘æ²¡æœ‰å®ä½“å½¢æ€ï¼Œä½†æˆ‘çš„â€œå¤§è„‘â€é‡Œè£…æ»¡äº†å„ç§çŸ¥è¯†ï¼Œä»ç§‘å­¦ã€å†å²åˆ°æ–‡åŒ–ã€æŠ€æœ¯ç­‰ã€‚æˆ‘å¯ä»¥å¸®åŠ©ä½ æŸ¥æ‰¾èµ„æ–™ã€å­¦ä¹ æ–°çŸ¥è¯†ã€è§£å†³æ•°å­¦é—®é¢˜ï¼Œæˆ–è€…ä»…ä»…æ˜¯èŠèŠå¤©ã€‚æˆ‘çš„ç›®æ ‡æ˜¯è®©ä½ çš„ç”Ÿæ´»æ›´åŠ ä¾¿æ·å’Œæœ‰è¶£ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ çš„å—ï¼Ÿ


    User:  è¯·é—®æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ



Assistant: ä½ åˆšæ‰å‘Šè¯‰æˆ‘ï¼Œä½ çš„åå­—æ˜¯é™ˆæ˜ã€‚å¦‚æœæœ‰ä»€ä¹ˆéœ€è¦å¸®åŠ©çš„ï¼Œå°½ç®¡å‘Šè¯‰æˆ‘ï¼Œé™ˆæ˜ï¼


    User:  exit



Assistant: å¥½çš„ï¼Œé™ˆæ˜ï¼å¦‚æœä½ æœ‰ä»»ä½•å…¶ä»–é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œéšæ—¶æ¬¢è¿å›æ¥ã€‚ç¥ä½ æœ‰ä¸ªç¾å¥½çš„ä¸€å¤©ï¼å†è§ï¼


    å¯¹è¯ç»“æŸã€‚


### DeepSeek-v3æ¨¡å‹ å‚æ•°æ±‡æ€»è¡¨

| å‚æ•°å                 | ç±»å‹                 | å¿…å¡«/å¯é€‰  | é»˜è®¤å€¼       | è¯´æ˜                                                                                     |
|------------------------|----------------------|------------|--------------|------------------------------------------------------------------------------------------|
| **model**              | string               | å¿…å¡«       | æ—            | æŒ‡å®šè¦ä½¿ç”¨çš„æ¨¡å‹ IDï¼Œä¾‹å¦‚ `gpt-4o` æˆ– `gpt-4o-mini`ã€‚                                     |
| **store**              | boolean or null      | å¯é€‰       | false        | æ˜¯å¦å­˜å‚¨æœ¬æ¬¡å¯¹è¯çš„è¾“å‡ºï¼Œä¾›æ¨¡å‹ç²¾ç‚¼æˆ–è¯„ä¼°äº§å“ä½¿ç”¨ã€‚                                         |
| **metadata**           | object or null       | å¯é€‰       | null         | å¼€å‘è€…è‡ªå®šä¹‰çš„æ ‡ç­¾å’Œå€¼ï¼Œç”¨äºè¿‡æ»¤ä»ªè¡¨ç›˜ä¸­çš„è¡¥å…¨ç»“æœã€‚                                        |
| **frequency_penalty**  | number or null       | å¯é€‰       | 0            | æ•°å€¼åœ¨ `-2.0` åˆ° `2.0` ä¹‹é—´ï¼Œæ­£å€¼å‡å°‘é‡å¤ç”Ÿæˆå†…å®¹çš„å¯èƒ½æ€§ã€‚                                |
| **logit_bias**         | map                  | å¯é€‰       | null         | è°ƒæ•´æŸäº›ç‰¹å®š tokens å‡ºç°çš„å¯èƒ½æ€§ï¼Œå€¼åœ¨ `-100` åˆ° `100` ä¹‹é—´ã€‚                             |
| **logprobs**           | boolean or null      | å¯é€‰       | false        | æ˜¯å¦è¿”å›ç”Ÿæˆçš„æ¯ä¸ª token çš„å¯¹æ•°æ¦‚ç‡ã€‚                                                      |
| **top_logprobs**       | integer or null      | å¯é€‰       | null         | æŒ‡å®šè¿”å›æœ€æœ‰å¯èƒ½å‡ºç°çš„å‰å‡ ä¸ª tokens åŠå…¶æ¦‚ç‡ï¼Œéœ€å¼€å¯ `logprobs`ã€‚                          |
| **max_completion_tokens** | integer or null    | å¯é€‰       | null         | æŒ‡å®šæ¨¡å‹ç”Ÿæˆçš„æœ€å¤§ token æ•°ï¼ŒåŒ…æ‹¬å¯è§æ–‡æœ¬å’Œæ¨ç† tokensã€‚                                      |
| **n**                  | integer or null      | å¯é€‰       | 1            | æ¯ä¸ªè¾“å…¥ç”Ÿæˆçš„å¯¹è¯è¡¥å…¨é€‰é¡¹æ•°é‡ï¼Œå€¼è¶Šå¤§ï¼Œç”Ÿæˆçš„å›å¤è¶Šå¤šã€‚                                     |
| **presence_penalty**    | number or null       | å¯é€‰       | 0            | æ•°å€¼åœ¨ `-2.0` åˆ° `2.0` ä¹‹é—´ï¼Œæ­£å€¼é¼“åŠ±ç”Ÿæˆæ–°çš„ä¸»é¢˜å’Œå†…å®¹ã€‚                                   |
| **response_format**     | object               | å¯é€‰       | null         | æŒ‡å®šç”Ÿæˆç»“æœçš„æ ¼å¼ï¼Œå¯ä»¥è®¾ç½®ä¸º `json_schema` ä»¥ç¡®ä¿ç»“æ„åŒ–è¾“å‡ºï¼Œæˆ– `json_object` ç”¨äº JSON æ ¼å¼ã€‚ |
| **seed**               | integer or null      | å¯é€‰       | null         | ä¿æŒç”Ÿæˆçš„ä¸€è‡´æ€§ï¼Œé‡å¤ç›¸åŒè¯·æ±‚å°†å°½é‡ç”Ÿæˆç›¸åŒçš„ç»“æœã€‚                                         |
| **service_tier**        | string or null       | å¯é€‰       | auto         | æŒ‡å®šæœåŠ¡å»¶è¿Ÿç­‰çº§ï¼Œé€‚ç”¨äºä»˜è´¹è®¢é˜…ç”¨æˆ·ï¼Œé»˜è®¤ä¸º `auto`ã€‚                                       |
| **stop**               | string / array / null | å¯é€‰       | null         | æœ€å¤šæŒ‡å®š 4 ä¸ªåºåˆ—ï¼ŒAPI é‡åˆ°è¿™äº›åºåˆ—æ—¶ä¼šåœæ­¢ç”Ÿæˆè¿›ä¸€æ­¥çš„ tokensã€‚                             |
| **stream**             | boolean or null      | å¯é€‰       | false        | æ˜¯å¦å¯ç”¨æµå¼å“åº”ï¼Œè‹¥å¯ç”¨ï¼Œç”Ÿæˆçš„ tokens å°†é€æ­¥è¿”å›ã€‚                                         |
| **stream_options**      | object or null       | å¯é€‰       | null         | æµå¼å“åº”çš„é€‰é¡¹ï¼Œä»…å½“ `stream` ä¸º `true` æ—¶è®¾ç½®ã€‚                                             |
| **temperature**        | number or null       | å¯é€‰       | 1            | æ§åˆ¶ç”Ÿæˆè¾“å‡ºçš„éšæœºæ€§ï¼Œå€¼è¶Šé«˜ç”Ÿæˆçš„æ–‡æœ¬è¶Šéšæœºã€‚å»ºè®®è°ƒæ•´æ­¤å€¼æˆ– `top_p`ï¼Œè€Œä¸æ˜¯åŒæ—¶è°ƒæ•´ã€‚         |
| **top_p**              | number or null       | å¯é€‰       | 1            | ä½¿ç”¨æ ¸é‡‡æ ·æ–¹æ³•ï¼Œé€‰æ‹©æœ€æœ‰å¯èƒ½çš„ tokensï¼Œæ€»æ¦‚ç‡è¾¾åˆ° `top_p` ç™¾åˆ†æ¯”ã€‚å»ºè®®ä¸ `temperature` äºŒé€‰ä¸€ã€‚ |
| **tools**              | array                | å¯é€‰       | null         | æ¨¡å‹å¯ä»¥è°ƒç”¨çš„å·¥å…·åˆ—è¡¨ï¼Œç›®å‰ä»…æ”¯æŒå‡½æ•°è°ƒç”¨ã€‚                                                 |
| **user**               | string               | å¯é€‰       | null         | è¡¨ç¤ºæœ€ç»ˆç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºç›‘æ§å’Œæ£€æµ‹æ»¥ç”¨è¡Œä¸ºã€‚                                           |

---

### å‚æ•°è§£é‡Šï¼š

1. **æ¨¡å‹å’Œè¾“å‡ºç›¸å…³å‚æ•°**ï¼š
   - `model` æ˜¯å¿…å¡«å‚æ•°ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªæ¨¡å‹ï¼ˆå¦‚ `deepseek-chat ` æˆ– `deepseek-code`ï¼‰ã€‚
   - `store` æ§åˆ¶æ˜¯å¦å­˜å‚¨ç”Ÿæˆçš„å¯¹è¯ç»“æœï¼Œä¾¿äºåç»­æ¨¡å‹è®­ç»ƒæˆ–è¯„ä¼°ã€‚
   - `metadata` ç”¨äºæ·»åŠ å¼€å‘è€…è‡ªå®šä¹‰çš„æ ‡ç­¾ï¼Œä¾¿äºåœ¨ä»ªè¡¨ç›˜ä¸­è¿‡æ»¤è¡¥å…¨ç»“æœã€‚
   - `max_completion_tokens` å’Œ `n` æ§åˆ¶ç”Ÿæˆå†…å®¹çš„æ•°é‡å’Œé•¿åº¦ï¼Œå¸®åŠ©ç®¡ç†ç”Ÿæˆæˆæœ¬ã€‚

2. **ç”Ÿæˆè¡Œä¸ºæ§åˆ¶**ï¼š
   - `frequency_penalty` å’Œ `presence_penalty` éƒ½ç”¨äºå½±å“ç”Ÿæˆç»“æœçš„å†…å®¹é‡å¤åº¦å’Œæ–°é¢–æ€§ã€‚
   - `logit_bias` æ˜¯ç”¨äºè°ƒæ•´ç‰¹å®š token å‡ºç°æ¦‚ç‡çš„é«˜çº§æ§åˆ¶å·¥å…·ã€‚
   - `temperature` å’Œ `top_p` é€šè¿‡ä¸åŒçš„æ–¹å¼æ§åˆ¶ç”Ÿæˆç»“æœçš„éšæœºæ€§ï¼Œå»ºè®®é€‰å…¶ä¸€è¿›è¡Œè°ƒæ•´ã€‚

3. **é«˜çº§åŠŸèƒ½**ï¼š
   - `logprobs` å’Œ `top_logprobs` ç”¨äºè¿”å›æ¯ä¸ª token çš„æ¦‚ç‡ä¿¡æ¯ï¼Œé€‚åˆå¯¹æ¨¡å‹è¾“å‡ºè¿›è¡Œæ›´ç»†ç²’åº¦åˆ†æã€‚
   - `stream` å¯ç”¨åä¼šå®æ—¶è¿”å›ç”Ÿæˆçš„ç»“æœï¼Œé€‚ç”¨äºéœ€è¦é€æ­¥å±•ç¤ºå†…å®¹çš„åœºæ™¯ã€‚
   - `tools` å…è®¸æ¨¡å‹è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼ˆå¦‚å‡½æ•°ï¼‰ï¼Œé€‚ç”¨äºæ‰©å±•æ¨¡å‹çš„åŠŸèƒ½ã€‚

4. **æœåŠ¡å’Œç”¨æˆ·ç›¸å…³å‚æ•°**ï¼š
   - `service_tier` æ§åˆ¶æœåŠ¡çš„å»¶è¿Ÿå’Œç¨³å®šæ€§ï¼Œé€‚åˆé«˜æ€§èƒ½è¦æ±‚çš„ä»˜è´¹ç”¨æˆ·ã€‚
   - `user` ç”¨äºæ ‡è¯†æœ€ç»ˆç”¨æˆ·ï¼Œæœ‰åŠ©äºç›‘æ§ä½¿ç”¨è¡Œä¸ºï¼Œé˜²æ­¢æ»¥ç”¨ã€‚

---
