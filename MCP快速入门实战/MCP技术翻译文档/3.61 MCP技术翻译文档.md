***

* Anthropic MCPå‘å¸ƒé€šå‘Šï¼šhttps://www.anthropic.com/news/model-context-protocol

* MCP GitHubä¸»é¡µï¼šhttps://github.com/modelcontextprotocol

![](images/image.png)

### **å¼•å…¥æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰**

ä»Šå¤©ï¼Œæˆ‘ä»¬æ­£å¼**å¼€æº** **Model Context Protocolï¼ˆMCPï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰**ï¼Œè¿™æ˜¯ä¸€ç§ **å…¨æ–°çš„æ ‡å‡†**ï¼Œç”¨äºå°† **AI åŠ©æ‰‹** è¿æ¥åˆ°å®é™…å­˜å‚¨æ•°æ®çš„ **ç³»ç»Ÿ**ï¼ŒåŒ…æ‹¬ **å†…å®¹å­˜å‚¨åº“ã€ä¼ä¸šå·¥å…·ã€å¼€å‘ç¯å¢ƒ** ç­‰ã€‚MCP çš„ç›®æ ‡æ˜¯å¸®åŠ© **å‰æ²¿å¤§æ¨¡å‹** ç”Ÿæˆ **æ›´ä¼˜è´¨ã€æ›´ç›¸å…³çš„å“åº”**ã€‚

éšç€ **AI åŠ©æ‰‹** è¿›å…¥ä¸»æµåº”ç”¨ï¼Œæ•´ä¸ªè¡Œä¸šåœ¨ **æ¨¡å‹èƒ½åŠ›** æ–¹é¢æŠ•å…¥äº†å¤§é‡èµ„æºï¼Œæ¨åŠ¨äº† **æ¨ç†èƒ½åŠ›å’Œè´¨é‡** çš„å¿«é€Ÿå‘å±•ã€‚ç„¶è€Œï¼Œå³ä¾¿æ˜¯**æœ€å…ˆè¿›çš„æ¨¡å‹** ä»å—é™äº **æ•°æ®å­¤å²›** å’Œ **ä¼ ç»Ÿç³»ç»Ÿ**ï¼Œæ— æ³•è½»æ¾è®¿é—®å¤–éƒ¨æ•°æ®ã€‚æ¯æ–°å¢ä¸€ä¸ªæ•°æ®æºéƒ½éœ€è¦ **å•ç‹¬çš„è‡ªå®šä¹‰é›†æˆ**ï¼Œè¿™ä½¿å¾— **çœŸæ­£äº’è”çš„ AI ç”Ÿæ€** éš¾ä»¥è§„æ¨¡åŒ–æ‰©å±•ã€‚

MCP è§£å†³äº†è¿™ä¸€æŒ‘æˆ˜ã€‚å®ƒæä¾›äº†ä¸€ç§ **é€šç”¨ã€å¼€æ”¾çš„æ ‡å‡†**ï¼Œç”¨äºå°† AI ç³»ç»Ÿä¸æ•°æ®æºè¿æ¥åœ¨ä¸€èµ·ï¼Œ**å–ä»£ä¼ ç»Ÿçš„ç¢ç‰‡åŒ–é›†æˆ**ï¼Œå®ç°æ›´**ç®€æ´ã€é«˜æ•ˆã€ç¨³å®š**çš„ AI æ•°æ®è®¿é—®æ–¹å¼ã€‚

***

### **ğŸ”¹ ä»€ä¹ˆæ˜¯ Model Context Protocolï¼ˆMCPï¼‰ï¼Ÿ**

MCP æ˜¯ä¸€ç§ **å¼€æ”¾æ ‡å‡†**ï¼Œå®ƒå…è®¸å¼€å‘è€… **å®‰å…¨åœ°** åœ¨ **æ•°æ®æº** å’Œ **AI å·¥å…·** ä¹‹é—´å»ºç«‹ **åŒå‘è¿æ¥**ã€‚å…¶æ¶æ„éå¸¸ç®€å•ï¼š

* **å¼€å‘è€…å¯ä»¥é€šè¿‡ MCP æœåŠ¡å™¨** å…¬å¼€ä»–ä»¬çš„æ•°æ®ï¼›

* **AI åº”ç”¨ï¼ˆMCP å®¢æˆ·ç«¯ï¼‰** å¯ä»¥è¿æ¥åˆ° MCP æœåŠ¡å™¨ï¼Œè·å–æ‰€éœ€æ•°æ®ã€‚

ä»Šå¤©ï¼Œæˆ‘ä»¬æ­£å¼æ¨å‡º **MCP çš„ä¸‰å¤§æ ¸å¿ƒç»„ä»¶**ï¼š

1. **MCP åè®®è§„èŒƒä¸ SDK**ï¼Œä¾›å¼€å‘è€…æ„å»ºä¸é›†æˆ MCPï¼›

2. **Claude æ¡Œé¢åº”ç”¨ä¸­çš„æœ¬åœ° MCP æœåŠ¡å™¨æ”¯æŒ**ï¼Œä¾¿äºå¼€å‘è€…æµ‹è¯•ï¼›

3. **MCP æœåŠ¡å™¨çš„å¼€æºå­˜å‚¨åº“**ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ¥å…¥ä¸åŒç³»ç»Ÿã€‚

Claude 3.5 Sonnet å…·å¤‡ **å¿«é€Ÿæ„å»º MCP æœåŠ¡å™¨çš„èƒ½åŠ›**ï¼Œè®©ä¼ä¸šå’Œä¸ªäººèƒ½å¤Ÿ **å¿«é€Ÿè¿æ¥æœ€é‡è¦çš„æ•°æ®é›†**ï¼Œå¹¶ä¸å„ç§ AI å·¥å…· **æ— ç¼é›†æˆ**ã€‚ä¸ºå¸®åŠ©å¼€å‘è€…ä¸Šæ‰‹ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€äº› **é¢„æ„å»ºçš„ MCP æœåŠ¡å™¨**ï¼Œæ”¯æŒ **Google Driveã€Slackã€GitHubã€Gitã€Postgres å’Œ Puppeteer** ç­‰ä¸»æµä¼ä¸šç³»ç»Ÿã€‚

***

### **ğŸ”¹ æ—©æœŸé‡‡ç”¨è€…ä¸è¡Œä¸šé›†æˆ**

ç›®å‰ï¼Œ**Block** å’Œ **Apollo** ç­‰ä¼ä¸šå·²ç»åœ¨å…¶ç³»ç»Ÿä¸­ **é›†æˆäº† MCP**ï¼Œè€Œ **Zedã€Replitã€Codeiumã€Sourcegraph** ç­‰å¼€å‘å·¥å…·å…¬å¸ä¹Ÿæ­£åœ¨åŸºäº MCP **å¢å¼ºå…¶å¹³å°**ã€‚MCP ä½¿ AI ä»£ç†èƒ½å¤Ÿ **æ›´å¥½åœ°æ£€ç´¢ç›¸å…³ä¿¡æ¯**ï¼Œä»¥æ›´æ·±å…¥åœ°ç†è§£ç¼–ç¨‹ä»»åŠ¡çš„ä¸Šä¸‹æ–‡ï¼Œä»è€Œ**ç”Ÿæˆæ›´å‡†ç¡®ã€æ›´å…·åŠŸèƒ½æ€§çš„ä»£ç ï¼Œå‡å°‘åå¤å°è¯•**ã€‚

**Block é¦–å¸­æŠ€æœ¯å®˜ Dhanji R. Prasanna è¡¨ç¤ºï¼š**

> **â€œåœ¨ Blockï¼Œå¼€æºä¸ä»…æ˜¯ä¸€ç§å¼€å‘æ¨¡å¼ï¼Œæ›´æ˜¯æˆ‘ä»¬å·¥ä½œçš„åŸºç¡€ã€‚æˆ‘ä»¬è‡´åŠ›äºæ‰“é€ æ¨åŠ¨å˜é©çš„æŠ€æœ¯ï¼Œå¹¶ç¡®ä¿å…¶ä½œä¸ºå…¬å…±èµ„æºå¯¹æ‰€æœ‰äººå¼€æ”¾ã€‚åƒ MCP è¿™æ ·çš„å¼€æ”¾æŠ€æœ¯ï¼Œæ˜¯è¿æ¥ AI ä¸ç°å®ä¸–ç•Œåº”ç”¨çš„æ¡¥æ¢ï¼Œè®©åˆ›æ–°å˜å¾—**é€æ˜ã€å¯è®¿é—®ï¼Œå¹¶ä¸”**åŸºäºåä½œ**ã€‚æˆ‘ä»¬å¾ˆé«˜å…´èƒ½å¤Ÿå‚ä¸ MCP è¿™ä¸ªåè®®ï¼Œå¹¶åˆ©ç”¨å®ƒæ¥æ„å»ºè‡ªä¸» AI ä»£ç†ç³»ç»Ÿï¼Œè®© AI å¤„ç†é‡å¤æ€§å·¥ä½œï¼Œäººç±»å¯ä»¥ä¸“æ³¨äºåˆ›é€ æ€§ä»»åŠ¡ã€‚â€

ä»¥å¾€ï¼Œå¼€å‘è€…éœ€è¦ä¸º **æ¯ä¸ªæ•°æ®æº** **å•ç‹¬ç»´æŠ¤è¿æ¥å™¨**ï¼Œä½† **MCP è®©ä¸€åˆ‡å˜å¾—ç®€å•**â€”â€”åªéœ€**åŸºäº MCP æ ‡å‡†åè®®**æ„å»ºæ•°æ®é›†æˆã€‚éšç€ **MCP ç”Ÿæ€ç³»ç»Ÿä¸æ–­æˆç†Ÿ**ï¼ŒAI å°†èƒ½å¤Ÿ **æ— ç¼åˆ‡æ¢ä¸åŒå·¥å…·å’Œæ•°æ®é›†**ï¼Œå–ä»£å½“ä»Š **ç¢ç‰‡åŒ–çš„é›†æˆæ–¹å¼**ï¼Œæ„å»ºæ›´**å¯æŒç»­çš„ AI äº’è”æ¶æ„**ã€‚

***

### **ğŸš€ å¦‚ä½•å¼€å§‹ä½¿ç”¨ MCPï¼Ÿ**

å¼€å‘è€…**ä»Šå¤©å°±å¯ä»¥å¼€å§‹æ„å»ºå’Œæµ‹è¯• MCP è¿æ¥å™¨**ã€‚æ‰€æœ‰ **Claude.ai è®¡åˆ’** å‡æ”¯æŒ **å°† MCP æœåŠ¡å™¨è¿æ¥åˆ° Claude æ¡Œé¢åº”ç”¨**ã€‚

* **Claude for Work** è®¢é˜…ç”¨æˆ·å¯ä»¥**æœ¬åœ°æµ‹è¯• MCP æœåŠ¡å™¨**ï¼Œå°† Claude è¿æ¥åˆ° **å†…éƒ¨ç³»ç»Ÿå’Œæ•°æ®é›†**ã€‚

* æˆ‘ä»¬å¾ˆå¿«å°†æä¾› **å¼€å‘å·¥å…·åŒ…**ï¼Œå¸®åŠ©ä¼ä¸š **éƒ¨ç½²è¿œç¨‹ MCP æœåŠ¡å™¨**ï¼Œä»¥æœåŠ¡æ•´ä¸ª **Claude for Work ç»„ç»‡**ã€‚

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼€å§‹ä½¿ç”¨ MCPï¼š

1. **åœ¨ Claude æ¡Œé¢åº”ç”¨ä¸­å®‰è£…é¢„æ„å»ºçš„ MCP æœåŠ¡å™¨**

2. **é˜…è¯»æˆ‘ä»¬çš„å¿«é€Ÿå…¥é—¨æŒ‡å—ï¼Œæ„å»ºä½ çš„ç¬¬ä¸€ä¸ª MCP æœåŠ¡å™¨**

3. **å‚ä¸æˆ‘ä»¬çš„å¼€æº MCP è¿æ¥å™¨å’Œå®ç°é¡¹ç›®**

***

### **ğŸŒ å¼€æ”¾ç¤¾åŒºï¼Œæ„å»ºæœªæ¥**

MCP æ˜¯ä¸€ä¸ª **å¼€æ”¾çš„ã€åä½œå¼çš„å¼€æºé¡¹ç›®**ï¼Œæˆ‘ä»¬æ¬¢è¿ä½ çš„åé¦ˆï¼
&#x20;æ— è®ºä½ æ˜¯ï¼š

* **AI å·¥å…·å¼€å‘è€…**ï¼Œå¸Œæœ›æ‰©å±• LLM çš„èƒ½åŠ›ï¼›

* **ä¼ä¸š**ï¼Œå¸Œæœ›å……åˆ†åˆ©ç”¨å·²æœ‰æ•°æ®ï¼›

* **æŠ€æœ¯æ¢ç´¢è€…**ï¼Œæƒ³å°è¯•å‰æ²¿ AI åº”ç”¨ï¼›

æˆ‘ä»¬**é‚€è¯·ä½ å…±åŒæ‰“é€ æœªæ¥çš„ AI ä¸Šä¸‹æ–‡æ ‡å‡†**ï¼Œè®© AI æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆåœ°ç†è§£å’Œåˆ©ç”¨æ•°æ®ï¼



![](images/image-1.png)



![](images/image-2.png)

### **æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆModel Context Protocol, MCPï¼‰**

**æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰** æ˜¯ä¸€ç§ **å¼€æ”¾åè®®**ï¼Œç”¨äºå®ç° **LLM åº”ç”¨** ä¸ **å¤–éƒ¨æ•°æ®æºå’Œå·¥å…·** ä¹‹é—´çš„æ— ç¼é›†æˆã€‚æ— è®ºä½ æ˜¯åœ¨æ„å»º **AI é©±åŠ¨çš„ IDE**ï¼Œä¼˜åŒ– **èŠå¤©ç•Œé¢**ï¼Œè¿˜æ˜¯åˆ›å»º **è‡ªå®šä¹‰ AI å·¥ä½œæµ**ï¼ŒMCP æä¾›äº†ä¸€ç§ **æ ‡å‡†åŒ–æ–¹å¼**ï¼Œè®© LLM èƒ½å¤Ÿè®¿é—®æ‰€éœ€çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚

***

## **ğŸš€ å…¥é—¨æŒ‡å—**

ğŸ“š **é˜…è¯»æ–‡æ¡£**ï¼šè·å–æŒ‡å—å’Œæ•™ç¨‹
&#x20;ğŸ” **æŸ¥çœ‹è§„èŒƒ**ï¼šäº†è§£åè®®çš„è¯¦ç»†æŠ€æœ¯è§„èŒƒ
&#x20;ğŸ’» **ä½¿ç”¨å®˜æ–¹ SDK å¼€å§‹å¼€å‘**ï¼š

* [TypeScript SDK](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)

* [Python SDK](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)

* [Java SDK](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)

* [Kotlin SDK](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)

***

## **ğŸ“‚ é¡¹ç›®ç»“æ„**

* **specification** - MCP åè®®è§„èŒƒä¸æ–‡æ¡£

* **typescript-sdk** - TypeScript ç‰ˆæœ¬çš„ SDK å®ç°

* **python-sdk** - Python ç‰ˆæœ¬çš„ SDK å®ç°

* **java-sdk** - Java ç‰ˆæœ¬çš„ SDK å®ç°

* **kotlin-sdk** - Kotlin ç‰ˆæœ¬çš„ SDK å®ç°

* **docs** - ç”¨æˆ·æ–‡æ¡£ä¸å¼€å‘æŒ‡å—

* **create-python-server** - Python æœåŠ¡å™¨æ¨¡æ¿

* **create-typescript-server** - TypeScript æœåŠ¡å™¨æ¨¡æ¿

* **create-kotlin-server** - Kotlin ç¤ºä¾‹æœåŠ¡å™¨

* **servers** - å·²ç»´æŠ¤çš„æœåŠ¡å™¨åˆ—è¡¨

***

## **ğŸ’¡ è´¡çŒ®æŒ‡å—**

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼æ— è®ºæ˜¯ **ä¿®å¤ bug**ã€**æ”¹è¿›æ–‡æ¡£**ï¼Œè¿˜æ˜¯ **æè®®æ–°åŠŸèƒ½**ï¼Œè¯·å‚è€ƒ **è´¡çŒ®æŒ‡å—** å¼€å§‹ä½ çš„è´¡çŒ®ä¹‹æ—…ã€‚

ğŸ’¬ **æœ‰é—®é¢˜ï¼Ÿ** æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ **ç¤¾åŒºè®ºå›** è®¨è®ºã€‚

***

## **ğŸ” å…³äº MCP**

MCP æ˜¯ **ç”± Anthropic, PBC ç»´æŠ¤çš„å¼€æºé¡¹ç›®**ï¼Œå¹¶å¯¹æ•´ä¸ªç¤¾åŒº **å¼€æ”¾è´¡çŒ®**ã€‚

***

![](images/image-3.png)

### **ğŸš€ å¿«é€Ÿå…¥é—¨ï¼šModel Context Protocolï¼ˆMCPï¼‰**

## **ç®€ä»‹**

ç«‹å³å¼€å§‹å­¦ä¹  **æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰**ï¼

ğŸ’¡ **Java SDK å·²å‘å¸ƒï¼** äº†è§£æœ€æ–°åŠ¨æ€ã€‚

MCP æ˜¯ä¸€ç§ **å¼€æ”¾åè®®**ï¼Œç”¨äº **æ ‡å‡†åŒ–åº”ç”¨ç¨‹åºå‘ LLM æä¾›ä¸Šä¸‹æ–‡çš„æ–¹å¼**ã€‚ä½ å¯ä»¥æŠŠ **MCP æƒ³è±¡æˆ AI åº”ç”¨çš„ USB-C æ¥å£**ã€‚
&#x20;æ­£å¦‚ USB-C æä¾›äº† **æ ‡å‡†åŒ–çš„æ–¹å¼** è®©è®¾å¤‡è¿æ¥åˆ°å„ç§å¤–è®¾å’Œé…ä»¶ï¼Œ**MCP æä¾›äº†æ ‡å‡†åŒ–æ–¹å¼**ï¼Œè®© **AI æ¨¡å‹** èƒ½å¤Ÿè¿æ¥åˆ° **ä¸åŒçš„æ•°æ®æºå’Œå·¥å…·**ã€‚

***

## **ğŸ”¹ ä¸ºä»€ä¹ˆé€‰æ‹© MCPï¼Ÿ**

MCP è®©ä½ èƒ½å¤Ÿåœ¨ **LLM ä¹‹ä¸Šæ„å»ºæ™ºèƒ½ä»£ç†ï¼ˆAgentsï¼‰å’Œå¤æ‚å·¥ä½œæµ**ã€‚
&#x20;LLM éœ€è¦ä¸ **æ•°æ®å’Œå·¥å…·** é›†æˆï¼Œè€Œ MCP æä¾›äº†ï¼š

&#x20;âœ… **ä¸°å¯Œçš„é¢„æ„å»ºé›†æˆ**ï¼ŒLLM å¯ç›´æ¥å¯¹æ¥
&#x20;âœ… **è·¨ LLM ä¾›åº”å•†çš„çµæ´»æ€§**ï¼Œæ”¯æŒéšæ—¶åˆ‡æ¢
&#x20;âœ… **æ•°æ®å®‰å…¨çš„æœ€ä½³å®è·µ**ï¼Œç¡®ä¿æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°åŸºç¡€è®¾æ–½ä¸­

***

## **ğŸ”¹ MCP çš„æ€»ä½“æ¶æ„**

MCP é‡‡ç”¨ **å®¢æˆ·ç«¯-æœåŠ¡å™¨ï¼ˆClient-Serverï¼‰æ¶æ„**ï¼Œå…¶ä¸­**ä¸»æœºåº”ç”¨**å¯ä»¥è¿æ¥å¤šä¸ª MCP æœåŠ¡å™¨ï¼š

```plain&#x20;text
Internet
    â¬‡
    Your Computer
    â¬‡
    MCP Protocol
    â†™   â†“   â†˜
MCP Server A  MCP Server B  MCP Server C
â†™        â†“       â†˜
Local Data A  Local Data B  Remote Service C
```

![](images/image-4.png)

ğŸ“Œ **MCP ä¸»è¦ç»„ä»¶ï¼š**

* **MCP ä¸»æœºï¼ˆHostsï¼‰**ï¼šå¦‚ **Claude æ¡Œé¢åº”ç”¨ã€IDEã€AI å·¥å…·**ï¼Œç”¨äºé€šè¿‡ MCP è®¿é—®æ•°æ®

* **MCP å®¢æˆ·ç«¯ï¼ˆClientsï¼‰**ï¼šè´Ÿè´£ **ä¸ MCP æœåŠ¡å™¨å»ºç«‹ 1:1 è¿æ¥**

* **MCP æœåŠ¡å™¨ï¼ˆServersï¼‰**ï¼šè½»é‡çº§ç¨‹åºï¼Œé€šè¿‡ **æ ‡å‡†åŒ–çš„ MCP åè®®** æä¾›ç‰¹å®šèƒ½åŠ›

* **æœ¬åœ°æ•°æ®æºï¼ˆLocal Data Sourcesï¼‰**ï¼šä½ çš„ **è®¡ç®—æœºæ–‡ä»¶ã€æ•°æ®åº“å’ŒæœåŠ¡**ï¼ŒMCP æœåŠ¡å™¨å¯ä»¥å®‰å…¨è®¿é—®

* **è¿œç¨‹æœåŠ¡ï¼ˆRemote Servicesï¼‰**ï¼šå¯é€šè¿‡ **API è®¿é—®çš„å¤–éƒ¨ç³»ç»Ÿ**ï¼ŒMCP æœåŠ¡å™¨å¯ä»¥è¿æ¥è¿™äº›ç³»ç»Ÿ

***

## **ğŸš€ å¦‚ä½•å¼€å§‹ä½¿ç”¨ MCPï¼Ÿ**

é€‰æ‹©æœ€é€‚åˆä½ çš„è·¯å¾„ï¼š

### **ğŸ”¹ å¿«é€Ÿå…¥é—¨**

* **å¯¹äºæœåŠ¡å™¨å¼€å‘è€…**ï¼šå­¦ä¹ å¦‚ä½•æ„å»º **MCP æœåŠ¡å™¨**ï¼Œè®© Claude for Desktop å’Œå…¶ä»–å®¢æˆ·ç«¯ä½¿ç”¨

* **å¯¹äºå®¢æˆ·ç«¯å¼€å‘è€…**ï¼šå­¦ä¹ å¦‚ä½•å¼€å‘ **MCP å®¢æˆ·ç«¯**ï¼Œæ”¯æŒæ‰€æœ‰ MCP æœåŠ¡å™¨

* **å¯¹äº Claude æ¡Œé¢åº”ç”¨ç”¨æˆ·**ï¼šå¼€å§‹ä½¿ç”¨ **Claude for Desktop å†…ç½®çš„ MCP æœåŠ¡å™¨**

***

## **ğŸ”¹ ç¤ºä¾‹**

* **ç¤ºä¾‹æœåŠ¡å™¨**ï¼šæŸ¥çœ‹å®˜æ–¹æä¾›çš„ **MCP æœåŠ¡å™¨åŠå…¶å®ç°**

* **ç¤ºä¾‹å®¢æˆ·ç«¯**ï¼šæŸ¥çœ‹æ”¯æŒ MCP é›†æˆçš„ **å®¢æˆ·ç«¯åˆ—è¡¨**

***

## **ğŸ“š æ•™ç¨‹**

* **ä½¿ç”¨ LLM æ„å»º MCP**ï¼šå­¦ä¹ å¦‚ä½•ä½¿ç”¨ Claude åŠ é€Ÿ **MCP å¼€å‘**

* **MCP è°ƒè¯•æŒ‡å—**ï¼šå­¦ä¹ å¦‚ä½•é«˜æ•ˆ **è°ƒè¯• MCP æœåŠ¡å™¨å’Œé›†æˆ**

* **MCP Inspector**ï¼šä½¿ç”¨ **äº¤äº’å¼è°ƒè¯•å·¥å…·** æµ‹è¯•ä½ çš„ MCP æœåŠ¡å™¨

***

## **ğŸ” æ·±å…¥æ¢ç´¢ MCP**

* **æ ¸å¿ƒæ¶æ„**ï¼šäº†è§£ **MCP å¦‚ä½•è¿æ¥å®¢æˆ·ç«¯ã€æœåŠ¡å™¨å’Œ LLM**

* **èµ„æºç®¡ç†**ï¼šå¦‚ä½• **è®© LLM è®¿é—® MCP æœåŠ¡å™¨ä¸­çš„æ•°æ®**

* **æç¤ºè¯ï¼ˆPromptsï¼‰**ï¼šåˆ›å»º **å¯å¤ç”¨çš„æç¤ºè¯æ¨¡æ¿å’Œå·¥ä½œæµ**

* **å·¥å…·ï¼ˆToolsï¼‰**ï¼šè®© LLM èƒ½å¤Ÿ **é€šè¿‡ MCP æœåŠ¡å™¨æ‰§è¡Œæ“ä½œ**

* **é‡‡æ ·ï¼ˆSamplingï¼‰**ï¼šå…è®¸ MCP æœåŠ¡å™¨ **å‘ LLM è¯·æ±‚æ¨ç†**

* **ä¼ è¾“å±‚ï¼ˆTransportsï¼‰**ï¼šäº†è§£ MCP **çš„é€šä¿¡æœºåˆ¶**

***

## **ğŸŒ è´¡çŒ® & åé¦ˆ**

### **ğŸ”¹ æƒ³è´¡çŒ®ä»£ç ï¼Ÿ**

æŸ¥çœ‹æˆ‘ä»¬çš„ [**è´¡çŒ®æŒ‡å—**](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)ï¼Œå¸®åŠ©æ”¹è¿› MCPï¼

### **ğŸ”¹ å¯»æ±‚æ”¯æŒ & æäº¤åé¦ˆ**

ğŸ“Œ **é‡åˆ°é—®é¢˜ï¼Ÿæƒ³æäº¤æ–°åŠŸèƒ½å»ºè®®ï¼Ÿ**

* **MCP è§„èŒƒã€SDKã€æ–‡æ¡£ç›¸å…³é—®é¢˜**ï¼ˆå¼€æºï¼‰ğŸ‘‰ **åˆ›å»º GitHub Issue**

* **MCP è§„èŒƒç›¸å…³è®¨è®º & é—®ç­”** ğŸ‘‰ **å‚ä¸è§„èŒƒè®¨è®º**

* **å…¶ä»– MCP å¼€æºç»„ä»¶è®¨è®º & é—®ç­”** ğŸ‘‰ **åŠ å…¥ç»„ç»‡è®¨è®º**

* **Claude.app & Claude.ai çš„ MCP é›†æˆé—®é¢˜** ğŸ‘‰ **é‚®ä»¶è”ç³» <mcp-support@anthropic.com>**







![](images/image-5.png)

### **ğŸŒ¤ï¸ ä¸ºæœåŠ¡å™¨å¼€å‘è€…æä¾›çš„æŒ‡å—**

**ä½¿ç”¨ Claude for Desktop åŠå…¶ä»–å®¢æˆ·ç«¯ï¼Œæ„å»ºä½ çš„ MCP æœåŠ¡å™¨**

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°† **æ„å»ºä¸€ä¸ª MCP å¤©æ°”æœåŠ¡å™¨**ï¼Œå¹¶å°†å…¶è¿æ¥åˆ° **MCP ä¸»æœºï¼ˆClaude for Desktopï¼‰**ã€‚æˆ‘ä»¬å°†ä» **åŸºç¡€è®¾ç½®** å¼€å§‹ï¼Œé€æ­¥æ‹“å±•åˆ° **æ›´å¤æ‚çš„ç”¨ä¾‹**ã€‚

***

## **ğŸ”¹ æˆ‘ä»¬è¦æ„å»ºä»€ä¹ˆï¼Ÿ**

è®¸å¤š **LLMï¼ˆåŒ…æ‹¬ Claudeï¼‰** ç›®å‰**æ— æ³•**ç›´æ¥è·å– **å¤©æ°”é¢„æŠ¥** æˆ– **ä¸¥é‡å¤©æ°”è­¦æŠ¥**ã€‚è®©æˆ‘ä»¬ä½¿ç”¨ **MCP** æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼

æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œæä¾› **ä¸¤ä¸ªå·¥å…·ï¼ˆToolsï¼‰**ï¼š

* **`get-alerts`** â€”â€” è·å–ä¸¥é‡å¤©æ°”è­¦æŠ¥

* **`get-forecast`** â€”â€” è·å–å¤©æ°”é¢„æŠ¥

ç„¶åï¼Œæˆ‘ä»¬ä¼šå°†è¿™ä¸ªæœåŠ¡å™¨ **è¿æ¥åˆ° MCP ä¸»æœº**ï¼ˆæœ¬æ•™ç¨‹ä¸­æ˜¯ **Claude for Desktop**ï¼‰ï¼š

![](images/image-6.png)

![](images/image-7.png)

```plain&#x20;text
+------------------------+
|  Claude for Desktop   |  â†â€”â€” MCP ä¸»æœºï¼ˆHostï¼‰
+------------------------+
        â†“
   MCP Protocol
        â†“
+------------------------+
|     Weather Server    |  â†â€”â€” MCP æœåŠ¡å™¨ï¼ˆServerï¼‰
+------------------------+
```

ğŸ“Œ **æœåŠ¡å™¨å¯ä»¥è¿æ¥åˆ°ä»»ä½• MCP å®¢æˆ·ç«¯**ã€‚æœ¬æ•™ç¨‹é€‰æ‹© **Claude for Desktop** ä»…ä»…æ˜¯ä¸ºäº†ç®€åŒ–ç¤ºä¾‹ã€‚
&#x20;å¦‚æœä½ æƒ³åˆ›å»º **è‡ªå®šä¹‰ MCP å®¢æˆ·ç«¯**ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ç›¸åº”çš„ **å¼€å‘æŒ‡å—** å’Œ **æ”¯æŒ MCP çš„å®¢æˆ·ç«¯åˆ—è¡¨**ã€‚

***

## **ğŸ”¹ ä¸ºä»€ä¹ˆé€‰æ‹© Claude for Desktopï¼Œè€Œä¸æ˜¯ Claude.aiï¼Ÿ**

Claude for Desktop **å…è®¸ç›´æ¥é›†æˆæœ¬åœ° MCP æœåŠ¡å™¨**ï¼Œè€Œ **Claude.ai**ï¼ˆå³ Web ç‰ˆæœ¬ï¼‰å½“å‰ä¸æ”¯æŒæœ¬åœ° MCP è¿æ¥ã€‚

å¦‚æœä½ å¸Œæœ›ä½¿ç”¨ Claude å’Œ MCP æœåŠ¡å™¨è¿›è¡Œ **æœ¬åœ°å¼€å‘å’Œæµ‹è¯•**ï¼ŒClaude for Desktop æ˜¯ **æ›´å¥½çš„é€‰æ‹©**ã€‚

***

## **ğŸ”¹ æ ¸å¿ƒ MCP æ¦‚å¿µ**

MCP æœåŠ¡å™¨ä¸»è¦æä¾› **ä¸‰ç§èƒ½åŠ›**ï¼š

1. **èµ„æºï¼ˆResourcesï¼‰**ï¼šç±»ä¼¼æ–‡ä»¶çš„æ•°æ®ï¼Œå¯ä»¥è¢«å®¢æˆ·ç«¯è¯»å–ï¼ˆå¦‚ API å“åº”ã€æ–‡ä»¶å†…å®¹ï¼‰ã€‚

2. **å·¥å…·ï¼ˆToolsï¼‰**ï¼šLLM å¯ä»¥è°ƒç”¨çš„å‡½æ•°ï¼ˆéœ€è¦ç”¨æˆ·æˆæƒï¼‰ã€‚

3. **æç¤ºè¯ï¼ˆPromptsï¼‰**ï¼šå¸®åŠ©ç”¨æˆ·å®Œæˆç‰¹å®šä»»åŠ¡çš„é¢„å®šä¹‰æ¨¡æ¿ã€‚

ğŸ“Œ **æœ¬æ•™ç¨‹ä¸»è¦å…³æ³¨ MCP çš„ â€œå·¥å…·ï¼ˆToolsï¼‰â€ æœºåˆ¶ã€‚**

***

## **ğŸ”¹ å¼€å§‹æ„å»ºæˆ‘ä»¬çš„å¤©æ°”æœåŠ¡å™¨ï¼**

ä½ å¯ä»¥é€‰æ‹©ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€ï¼š

* ğŸ **Python**

* ğŸŸ¢ **Node.js**

* â˜• **Java**

å®Œæ•´ä»£ç ç¤ºä¾‹å¯ä»¥åœ¨ [**è¿™é‡Œ**](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#) æ‰¾åˆ°ã€‚

![](images/image-8.png)

***

## **ğŸ”¹ å…ˆå†³æ¡ä»¶**

ğŸ“Œ åœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ éœ€è¦å…·å¤‡ä»¥ä¸‹çŸ¥è¯†ï¼š

* **Python åŸºç¡€**

* **å¯¹ LLMï¼ˆå¦‚ Claudeï¼‰å¦‚ä½•å·¥ä½œæœ‰åŸºæœ¬äº†è§£**

ğŸ“Œ **ç³»ç»Ÿè¦æ±‚**

* **Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬**

* **MCP Python SDK 1.2.0 æˆ–æ›´é«˜ç‰ˆæœ¬**

***

## **ğŸ”¹ è®¾ç½®å¼€å‘ç¯å¢ƒ**

### **1ï¸âƒ£ å®‰è£… `uv` å¹¶åˆå§‹åŒ– Python é¡¹ç›®**

ğŸ”¹ **MacOS/Linux å®‰è£… `uv`**

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

ğŸ“Œ **å®‰è£…å®Œæˆåï¼Œé‡å¯ç»ˆç«¯**ï¼Œç¡®ä¿ `uv` å‘½ä»¤å¯ç”¨ã€‚

ğŸ”¹ **Windows å®‰è£… `uv`**ï¼ˆå»ºè®®ä½¿ç”¨ WSLï¼‰

```bash
wsl curl -LsSf https://astral.sh/uv/install.sh | sh
```

***

### **2ï¸âƒ£ åˆ›å»ºé¡¹ç›®ç›®å½•å¹¶è®¾ç½®ç¯å¢ƒ**

ğŸ”¹ **MacOS/Linux**

```bash
# Create a new directory for our project
uv init weather
cd weather

# Create virtual environment and activate it
uv venv
source .venv/bin/activate

# Install dependencies
uv add "mcp[cli]" httpx

# Create our server file
touch weather.py
```

***

**æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç¼–å†™å¤©æ°”æœåŠ¡å™¨ä»£ç ï¼**

### **ğŸŒ¤ï¸ æ„å»ºä½ çš„ MCP æœåŠ¡å™¨**

## **ğŸ“Œ å¯¼å…¥ä¾èµ–å¹¶åˆå§‹åŒ–æœåŠ¡å™¨**

åœ¨ `weather.py` æ–‡ä»¶é¡¶éƒ¨ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```python
from typing import Any
import httpx
from mcp.server.fastmcp import FastMCP

# Initialize FastMCP server
mcp = FastMCP("weather")

# Constants
NWS_API_BASE = "https://api.weather.gov"
USER_AGENT = "weather-app/1.0"
```

ğŸ“Œ **FastMCP** é€šè¿‡ Python çš„ **ç±»å‹æç¤º** å’Œ **æ–‡æ¡£å­—ç¬¦ä¸²** è‡ªåŠ¨ç”Ÿæˆå·¥å…·å®šä¹‰ï¼Œä½¿å¾— **MCP å·¥å…·** çš„åˆ›å»ºä¸ç»´æŠ¤å˜å¾—æ›´åŠ ç®€å•ã€‚

***

## **ğŸ”¹ æ·»åŠ è¾…åŠ©å‡½æ•°**

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¼–å†™ **è¾…åŠ©å‡½æ•°**ï¼Œç”¨äºå‘ **ç¾å›½å›½å®¶æ°”è±¡å±€ APIï¼ˆNWS APIï¼‰** å‘é€è¯·æ±‚ï¼Œå¹¶æ ¼å¼åŒ–è¿”å›çš„æ•°æ®ã€‚

```python
async def make_nws_request(url: str) -> dict[str, Any] | None:
    """å‘ NWS API å‘é€è¯·æ±‚ï¼Œå¹¶è¿›è¡Œé”™è¯¯å¤„ç†"""
    headers = {
        "User-Agent": USER_AGENT,
        "Accept": "application/geo+json"
    }
    async with httpx.AsyncClient() as client:
        try:
            response = await client.get(url, headers=headers, timeout=30.0)
            response.raise_for_status()
            return response.json()
        except Exception:
            return None
def format_alert(feature: dict) -> str:
    """å°†å¤©æ°”è­¦æŠ¥ä¿¡æ¯æ ¼å¼åŒ–ä¸ºå¯è¯»å­—ç¬¦ä¸²"""
    props = feature["properties"]
    return f"""
äº‹ä»¶: {props.get('event', 'æœªçŸ¥')}
åŒºåŸŸ: {props.get('areaDesc', 'æœªçŸ¥')}
ä¸¥é‡ç¨‹åº¦: {props.get('severity', 'æœªçŸ¥')}
æè¿°: {props.get('description', 'æ— æè¿°')}
è¯´æ˜: {props.get('instruction', 'æ— å…·ä½“è¯´æ˜')}
"""
```

***

## **ğŸ”¹ å®ç°å·¥å…·æ‰§è¡Œé€»è¾‘**

å·¥å…·æ‰§è¡Œå¤„ç†å™¨è´Ÿè´£è°ƒç”¨å…·ä½“çš„å·¥å…·é€»è¾‘ã€‚è®©æˆ‘ä»¬å®ç° **è·å–å¤©æ°”è­¦æŠ¥** å’Œ **è·å–å¤©æ°”é¢„æŠ¥** çš„æ–¹æ³•ã€‚

### **1ï¸âƒ£ è·å–å¤©æ°”è­¦æŠ¥**

```python
@mcp.tool()
async def get_alerts(state: str) -> str:
    """è·å–ç¾å›½æŸä¸ªå·çš„å¤©æ°”è­¦æŠ¥
    Args:
        state: ç¾å›½å·çš„ä¸¤ä½å­—æ¯ä»£ç ï¼ˆå¦‚ CAã€NYï¼‰
    """
    url = f"{NWS_API_BASE}/alerts/active/area/{state}"
    data = await make_nws_request(url)
    if not data or "features" not in data:
        return "æ— æ³•è·å–å¤©æ°”è­¦æŠ¥æˆ–å½“å‰æ— è­¦æŠ¥ã€‚"
    if not data["features"]:
        return "è¯¥å·å½“å‰æ— æ´»åŠ¨è­¦æŠ¥ã€‚"
    alerts = [format_alert(feature) for feature in data["features"]]
    return "\n---\n".join(alerts)
```

***

### **2ï¸âƒ£ è·å–å¤©æ°”é¢„æŠ¥**

```python
@mcp.tool()
async def get_forecast(latitude: float, longitude: float) -> str:
    """è·å–æŸä¸ªåœ°ç†ä½ç½®çš„å¤©æ°”é¢„æŠ¥
    Args:
        latitude: çº¬åº¦
        longitude: ç»åº¦
    """
    # è·å–å¤©æ°”ç½‘æ ¼çš„ API ç«¯ç‚¹
    points_url = f"{NWS_API_BASE}/points/{latitude},{longitude}"
    points_data = await make_nws_request(points_url)
    if not points_data:
        return "æ— æ³•è·å–è¯¥ä½ç½®çš„å¤©æ°”æ•°æ®ã€‚"
    # è·å–å¤©æ°”é¢„æŠ¥ URL
    forecast_url = points_data["properties"]["forecast"]
    forecast_data = await make_nws_request(forecast_url)
    if not forecast_data:
        return "æ— æ³•è·å–è¯¦ç»†å¤©æ°”é¢„æŠ¥ä¿¡æ¯ã€‚"
    # è§£æå¹¶æ ¼å¼åŒ–å‰ 5 ä¸ªæ—¶é—´æ®µçš„é¢„æŠ¥
    periods = forecast_data["properties"]["periods"]
    forecasts = []
    for period in periods[:5]:  # ä»…æ˜¾ç¤ºæœ€è¿‘ 5 ä¸ªæ—¶é—´æ®µ
        forecast = f"""
{period['name']}:
æ¸©åº¦: {period['temperature']}Â°{period['temperatureUnit']}
é£é€Ÿ: {period['windSpeed']} {period['windDirection']}
å¤©æ°”æƒ…å†µ: {period['detailedForecast']}
"""
        forecasts.append(forecast)
    return "\n---\n".join(forecasts)
```

***

## **ğŸ”¹ è¿è¡ŒæœåŠ¡å™¨**

æœ€åï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–å¹¶è¿è¡ŒæœåŠ¡å™¨ï¼š

```python
if 
name
 == "
__main__
":
    # è¿è¡Œ MCP æœåŠ¡å™¨
    mcp.run(transport='stdio')
```

ğŸ“Œ **è¿è¡ŒæœåŠ¡å™¨**

```bash
uv run weather.py
```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ çš„ **MCP æœåŠ¡å™¨** ç°åœ¨å·²ç»å¯ä»¥è¿è¡Œäº† ğŸ‰ï¼

***

## **âœ… æµ‹è¯• MCP æœåŠ¡å™¨ï¼ˆClaude for Desktopï¼‰**

### **ğŸ“Œ å®‰è£… Claude for Desktop**

ç¡®ä¿ä½ å·²å®‰è£… **Claude for Desktop**ï¼Œå¹¶å‡çº§åˆ° **æœ€æ–°ç‰ˆæœ¬**ï¼š

* **MacOS** / **Windows**ï¼š[ä¸‹è½½æœ€æ–°ç‰ˆæœ¬](https://claude.ai/)

ğŸ“Œ **Linux ç”¨æˆ·**ï¼šç›®å‰ **Claude for Desktop ä¸æ”¯æŒ Linux**ï¼Œä½ å¯ä»¥å‚è€ƒ **MCP å®¢æˆ·ç«¯å¼€å‘æ•™ç¨‹**ï¼Œè‡ªå·±æ„å»ºä¸€ä¸ªå®¢æˆ·ç«¯æ¥è¿æ¥æœåŠ¡å™¨ã€‚

***

## **ğŸ”¹ é…ç½® Claude for Desktop**

ä½ éœ€è¦ **æ‰‹åŠ¨é…ç½® MCP æœåŠ¡å™¨** ä»¥ä¾¿ Claude è¯†åˆ«å®ƒï¼š

1. **æ‰“å¼€ Claude é…ç½®æ–‡ä»¶**ï¼š

```bash
code ~/Library/Application\ Support/Claude/claude_desktop_config.json
```

1. ğŸ“Œ **Windows** ç”¨æˆ·å¯ä»¥ä½¿ç”¨ **VS Code** æˆ– **è®°äº‹æœ¬** æ‰“å¼€è¯¥æ–‡ä»¶ã€‚

2. **æ·»åŠ  MCP æœåŠ¡å™¨é…ç½®** åœ¨ `mcpServers` å­—æ®µä¸­æ·»åŠ  **å¤©æ°”æœåŠ¡å™¨** é…ç½®ï¼š

```json
{
    "mcpServers": {
        "weather": {
            "command": "uv",
            "args": [
                "--directory",
                "/ABSOLUTE/PATH/TO/PARENT/FOLDER/weather",
                "run",
                "weather.py"
            ]
        }
    }
}
```

1. ğŸ“Œ **æ³¨æ„äº‹é¡¹**ï¼š

   * `command`ï¼šå¦‚æœ `uv` **æ— æ³•ç›´æ¥è¯†åˆ«**ï¼Œä½ éœ€è¦ **æä¾›å®Œæ•´è·¯å¾„**ï¼ˆMacOS/Linux è¿è¡Œ `which uv`ï¼ŒWindows è¿è¡Œ `where uv`ï¼‰ã€‚

   * `/ABSOLUTE/PATH/TO/PARENT/FOLDER/weather` éœ€è¦æ›¿æ¢ä¸º **æœåŠ¡å™¨æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„**ã€‚

2. **ä¿å­˜é…ç½®æ–‡ä»¶**

3. **é‡å¯ Claude for Desktop**ï¼Œä½¿é…ç½®ç”Ÿæ•ˆã€‚

***

## **ğŸ‰ ä½ çš„ MCP æœåŠ¡å™¨å·²ç»æˆåŠŸè¿æ¥ï¼**

ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨ **Claude for Desktop** ä¸­ä½¿ç”¨ **å¤©æ°”é¢„æŠ¥å·¥å…·** å’Œ **è­¦æŠ¥æŸ¥è¯¢å·¥å…·**ï¼Œé€šè¿‡ MCP è®© Claude è®¿é—®å®æ—¶å¤©æ°”æ•°æ® ğŸŒ¤ï¸ã€‚

### **âœ… ä½¿ç”¨å‘½ä»¤æµ‹è¯• MCP æœåŠ¡å™¨**

### **ğŸ”¹ ç¡®ä¿ Claude for Desktop è¯†åˆ«åˆ°å¤©æ°”æœåŠ¡å™¨**

è¦ç¡®è®¤ **Claude for Desktop** èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«æˆ‘ä»¬åœ¨å¤©æ°”æœåŠ¡å™¨ä¸­**æ³¨å†Œçš„ä¸¤ä¸ªå·¥å…·**ï¼Œè¯·æŸ¥æ‰¾ç•Œé¢ä¸­çš„ **é”¤å­å›¾æ ‡ ğŸ› ï¸**ã€‚

![](images/image-9.png)

1. **ç‚¹å‡» Claude for Desktop ç•Œé¢ä¸­çš„ ğŸ› ï¸ é”¤å­å›¾æ ‡**

2. **æŸ¥çœ‹æ˜¯å¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªå·¥å…·**ï¼š&#x20;

   * **`get-alerts`**ï¼ˆè·å–å¤©æ°”è­¦æŠ¥ï¼‰

   * **`get-forecast`**ï¼ˆè·å–å¤©æ°”é¢„æŠ¥ï¼‰

![](images/image-10.png)

ğŸ“Œ **å¦‚æœ Claude æ²¡æœ‰æ£€æµ‹åˆ°æœåŠ¡å™¨**ï¼š

* è¯·æŸ¥çœ‹ **[æ•…éšœæ’æŸ¥](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#troubleshooting) éƒ¨åˆ†**ï¼Œè·å–è°ƒè¯•æŠ€å·§ã€‚

***

### **ğŸ”¹ åœ¨ Claude for Desktop ä¸­æµ‹è¯• MCP æœåŠ¡å™¨**

å¦‚æœ **Claude æ­£ç¡®è¯†åˆ«äº† MCP æœåŠ¡å™¨**ï¼Œä½ å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œæµ‹è¯•ï¼š

```plain&#x20;text
Whatâ€™s the weather in Sacramento?
ï¼ˆè¨å…‹æ‹‰é—¨æ‰˜çš„å¤©æ°”å¦‚ä½•ï¼Ÿï¼‰
What are the active weather alerts in Texas?
ï¼ˆå¾·å…‹è¨æ–¯å·å½“å‰çš„å¤©æ°”è­¦æŠ¥æœ‰å“ªäº›ï¼Ÿï¼‰
```

![](images/image-11.png)

![](images/image-12.png)

ğŸ“Œ **æ³¨æ„**ï¼š

* ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ **ç¾å›½å›½å®¶æ°”è±¡å±€ï¼ˆNWSï¼‰API**ï¼Œæ‰€ä»¥è¿™äº›æŸ¥è¯¢ **ä»…é€‚ç”¨äºç¾å›½åœ°åŒº**ã€‚

***

## **ğŸ” MCP æœåŠ¡å™¨çš„æ‰§è¡Œæµç¨‹**

å½“ä½ å‘ Claude æé—®æ—¶ï¼ŒMCP æœåŠ¡å™¨ä¼šåœ¨**å¹•å**æ‰§è¡Œä¸€ç³»åˆ—æ­¥éª¤ï¼š

1ï¸âƒ£ **å®¢æˆ·ç«¯**ï¼ˆClaude for Desktopï¼‰**æ¥æ”¶ä½ çš„é—®é¢˜**
&#x20;2ï¸âƒ£ **Claude è§£æé—®é¢˜**ï¼Œ**åˆ†æå¯ç”¨çš„ MCP å·¥å…·**ï¼Œå†³å®š **è°ƒç”¨å“ªä¸ªå·¥å…·**
&#x20;3ï¸âƒ£ **Claude é€šè¿‡ MCP æœåŠ¡å™¨æ‰§è¡Œé€‰å®šçš„å·¥å…·**ï¼ˆä¾‹å¦‚ `get-forecast` æˆ– `get-alerts`ï¼‰
&#x20;4ï¸âƒ£ **MCP æœåŠ¡å™¨è·å–ç»“æœ**ï¼Œå¹¶å°†å…¶è¿”å›ç»™ Claude
&#x20;5ï¸âƒ£ **Claude è§£æç»“æœ**ï¼Œå¹¶ **å°†å…¶è½¬æ¢ä¸ºè‡ªç„¶è¯­è¨€å›ç­”**
&#x20;6ï¸âƒ£ **æœ€ç»ˆç»“æœæ˜¾ç¤ºåœ¨ Claude ç•Œé¢ä¸­** ğŸ‰

***

## **ğŸ› ï¸ æ•…éšœæ’æŸ¥ï¼ˆTroubleshootingï¼‰**

å¦‚æœ **Claude for Desktop æ— æ³•æ£€æµ‹åˆ°ä½ çš„ MCP æœåŠ¡å™¨**ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹å‡ ç±»é—®é¢˜ï¼š

### **ğŸ”¹ Claude for Desktop é›†æˆé—®é¢˜**

* **æ£€æŸ¥ `claude_desktop_config.json` é…ç½®æ–‡ä»¶**

  * ç¡®ä¿ `"mcpServers"` é…ç½®æ­£ç¡®ï¼Œå¹¶ä½¿ç”¨ **ç»å¯¹è·¯å¾„**

  * ä¾‹å¦‚ï¼š&#x20;

  ```json
  {
      "mcpServers": {
          "weather": {
              "command": "uv",
              "args": [
                  "--directory",
                  "/ABSOLUTE/PATH/TO/PARENT/FOLDER/weather",
                  "run",
                  "weather.py"
              ]
          }
      }
  }
  ```

* **ç¡®è®¤ MCP æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ**

```bash
uv run weather.py
```

* **ç¡®ä¿ Claude for Desktop æ˜¯æœ€æ–°ç‰ˆæœ¬**

  * ä½ å¯ä»¥ä» [Claude å®˜æ–¹ç½‘ç«™](https://claude.ai/) ä¸‹è½½æœ€æ–°ç‰ˆã€‚

***

### **ğŸ”¹ å¤©æ°” API ç›¸å…³é—®é¢˜**

* **ç½‘ç»œè¯·æ±‚å¤±è´¥**

  * ç¡®ä¿ä½ çš„æœåŠ¡å™¨å¯ä»¥æ­£å¸¸è®¿é—® **NWS API**

  * è¿è¡Œï¼š&#x20;

  ```bash
  curl -H "User-Agent: weather-app/1.0" https://api.weather.gov/alerts/active
  ```

* **API é€Ÿç‡é™åˆ¶**

  * NWS API **å¯èƒ½æœ‰è®¿é—®é¢‘ç‡é™åˆ¶**ï¼Œè¯·å°è¯•ç¨åé‡è¯•

ğŸ“Œ **æ›´å¤šé«˜çº§è°ƒè¯•æŠ€å·§**ï¼š æŸ¥çœ‹æˆ‘ä»¬çš„\*\*[MCP è°ƒè¯•æŒ‡å—](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)**ï¼Œå­¦ä¹ å¦‚ä½•æ›´é«˜æ•ˆåœ°**è°ƒè¯• MCP æœåŠ¡å™¨ä¸é›†æˆ\*\*ã€‚

***

## **ğŸš€ ä¸‹ä¸€æ­¥**

ç°åœ¨ï¼Œä½ å·²ç»æˆåŠŸæ„å»ºå¹¶æµ‹è¯•äº†ä¸€ä¸ª MCP æœåŠ¡å™¨ï¼Œæ¥ä¸‹æ¥å¯ä»¥ï¼š

### **ğŸ”¹ æ„å»º MCP å®¢æˆ·ç«¯**

* å­¦ä¹ å¦‚ä½• **å¼€å‘è‡ªå·±çš„ MCP å®¢æˆ·ç«¯**ï¼Œè¿æ¥ MCP æœåŠ¡å™¨ã€‚

### **ğŸ”¹ æŸ¥çœ‹ç¤ºä¾‹æœåŠ¡å™¨**

* å‚è€ƒæˆ‘ä»¬çš„ [**å®˜æ–¹ MCP æœåŠ¡å™¨ç¤ºä¾‹åº“**](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)ï¼Œæ¢ç´¢æ›´å¤š **MCP æœåŠ¡å™¨å®ç°**ã€‚

### **ğŸ”¹ MCP è°ƒè¯•æŒ‡å—**

* äº†è§£å¦‚ä½• **é«˜æ•ˆè°ƒè¯• MCP æœåŠ¡å™¨**ï¼Œæ’é™¤å¸¸è§é”™è¯¯ã€‚

### **ğŸ”¹ ä½¿ç”¨ LLM æ„å»º MCP**

* å­¦ä¹ å¦‚ä½•ä½¿ç”¨ **Claude å’Œ LLM æŠ€æœ¯**ï¼ŒåŠ é€Ÿ MCP æœåŠ¡å™¨çš„å¼€å‘ã€‚

![](images/image-13.png)

### **ğŸ¤– ä¸ºå®¢æˆ·ç«¯å¼€å‘è€…æä¾›çš„æŒ‡å—**

**æ„å»ºå¯é›†æˆæ‰€æœ‰ MCP æœåŠ¡å™¨çš„è‡ªå®šä¹‰å®¢æˆ·ç«¯**

***

## **ğŸš€ ç›®æ ‡**

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½• **æ„å»ºä¸€ä¸ª LLM é©±åŠ¨çš„èŠå¤©æœºå™¨äººå®¢æˆ·ç«¯**ï¼Œå¹¶è®©å®ƒè¿æ¥åˆ° **MCP æœåŠ¡å™¨**ã€‚
&#x20;ğŸ“Œ **å»ºè®®**ï¼šå¦‚æœä½ è¿˜æ²¡æœ‰æ„å»º MCP æœåŠ¡å™¨ï¼Œå»ºè®®å…ˆå®Œæˆ [æœåŠ¡å™¨å¿«é€Ÿå…¥é—¨æ•™ç¨‹](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#) ä»¥äº†è§£åŸºç¡€æ¦‚å¿µã€‚

ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€ï¼š

* ğŸ **Python**

* ğŸŸ¢ **Node.js**

* â˜• **Java**

ğŸ“Œ **å®Œæ•´ä»£ç ç¤ºä¾‹**ï¼š[ç‚¹å‡»è¿™é‡Œ](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)

***

## **ğŸ“Œ ç³»ç»Ÿè¦æ±‚**

åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ çš„ç³»ç»Ÿç¬¦åˆä»¥ä¸‹è¦æ±‚ï¼š âœ… **Mac æˆ– Windows ç”µè„‘**
&#x20;âœ… **å·²å®‰è£…æœ€æ–°ç‰ˆ Python**
&#x20;âœ… **å·²å®‰è£…æœ€æ–°ç‰ˆ `uv`**ï¼ˆç”¨äºç®¡ç† Python é¡¹ç›®ï¼‰

***

## **ğŸ”¹ è®¾ç½®å¼€å‘ç¯å¢ƒ**

### **1ï¸âƒ£ åˆ›å»º Python é¡¹ç›®**

```bash
# Create project directory
uv init mcp-client
cd mcp-client

# Create virtual environment
uv venv

# Activate virtual environment
# On Windows:
.venv\Scripts\activate
# On Unix or MacOS:
source .venv/bin/activate

# Install required packages
uv add mcp anthropic python-dotenv

# Remove boilerplate files
rm hello.py

# Create our main file
touch client.py
```

***

## **ğŸ”¹ é…ç½® API å¯†é’¥**

ä½ éœ€è¦ä» **Anthropic æ§åˆ¶å°** è·å– **API Key**ã€‚

### **1ï¸âƒ£ åˆ›å»º `.env` æ–‡ä»¶**

```bash
touch .env
```

### **2ï¸âƒ£ åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ  API Key**

```plain&#x20;text
ANTHROPIC_API_KEY=<your_key_here>
```

ğŸ“Œ **ç¡®ä¿ä½ çš„ API Key æ˜¯å®‰å…¨çš„ï¼**

### **3ï¸âƒ£ å°† `.env` æ·»åŠ åˆ° `.gitignore`**

```bash
echo ".env" >> .gitignore
```

***

## **ğŸ”¹ åˆ›å»º MCP å®¢æˆ·ç«¯**

### **1ï¸âƒ£ å¯¼å…¥ä¾èµ– & åˆ›å»ºåŸºç¡€å®¢æˆ·ç«¯**

åœ¨ `client.py` æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```python
import asyncio
from typing import Optional
from contextlib import AsyncExitStack

from mcp import ClientSession, StdioServerParameters
from mcp.client.stdio import stdio_client

from anthropic import Anthropic
from dotenv import load_dotenv

load_dotenv()  # load environment variables from .env

class MCPClient:
    def __init__(self):
        # Initialize session and client objects
        self.session: Optional[ClientSession] = None
        self.exit_stack = AsyncExitStack()
        self.anthropic = Anthropic()
    # methods will go here
```

***

## **ğŸ”¹ è¿æ¥ MCP æœåŠ¡å™¨**

ç°åœ¨ï¼Œæˆ‘ä»¬å®ç° **è¿æ¥ MCP æœåŠ¡å™¨** çš„æ–¹æ³•ï¼š

```python
async def connect_to_server(self, server_script_path: str):
    """è¿æ¥åˆ° MCP æœåŠ¡å™¨
    Args:
        server_script_path: æœåŠ¡å™¨è„šæœ¬çš„è·¯å¾„ï¼ˆ.py æˆ– .js æ–‡ä»¶ï¼‰
    """
    is_python = server_script_path.endswith('.py')
    is_js = server_script_path.endswith('.js')
    if not (is_python or is_js):
        raise ValueError("æœåŠ¡å™¨è„šæœ¬å¿…é¡»æ˜¯ .py æˆ– .js æ–‡ä»¶")
    # æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©è¿è¡Œå‘½ä»¤
    command = "python" if is_python else "node"
    server_params = StdioServerParameters(
        command=command,
        args=[server_script_path],
        env=None
    )
    # å¯åŠ¨ MCP æœåŠ¡å™¨å¹¶å»ºç«‹é€šä¿¡
    stdio_transport = await self.exit_stack.enter_async_context(stdio_client(server_params))
    self.stdio, self.write = stdio_transport
    self.session = await self.exit_stack.enter_async_context(ClientSession(self.stdio, self.write))
    await self.session.initialize()
    # åˆ—å‡ºå¯ç”¨çš„å·¥å…·
    response = await self.session.list_tools()
    tools = response.tools
    print("\nå·²è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œæ”¯æŒä»¥ä¸‹å·¥å…·:", [tool.name for tool in tools])
```

ğŸ“Œ **è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼š**

1. **æ£€æµ‹** æœåŠ¡å™¨è„šæœ¬æ˜¯å¦æ˜¯ `.py` æˆ– `.js` æ–‡ä»¶

2. **ç¡®å®š** å¯åŠ¨å‘½ä»¤ï¼ˆPython æœåŠ¡å™¨ç”¨ `python`ï¼ŒNode.js æœåŠ¡å™¨ç”¨ `node`ï¼‰

3. **é€šè¿‡ MCP Stdio åè®®** è¿æ¥åˆ°æœåŠ¡å™¨

4. **åˆå§‹åŒ– MCP ä¼šè¯**

5. **åˆ—å‡ºæœåŠ¡å™¨æ”¯æŒçš„å·¥å…·**ï¼Œç¡®ä¿æˆåŠŸè¿æ¥

***

### **ğŸ¤– å¤„ç†æŸ¥è¯¢é€»è¾‘ï¼ˆQuery Processing Logicï¼‰**

ç°åœ¨ï¼Œæˆ‘ä»¬æ¥å®ç° **MCP å®¢æˆ·ç«¯çš„æ ¸å¿ƒåŠŸèƒ½**ï¼ŒåŒ…æ‹¬ï¼š&#x20;

&#x20;âœ… **å¤„ç†ç”¨æˆ·æŸ¥è¯¢**
&#x20;âœ… **ç®¡ç† Claude å¯¹å·¥å…·è°ƒç”¨çš„å“åº”**
&#x20;âœ… **æ‰§è¡Œå·¥å…·è°ƒç”¨** å¹¶è¿”å›ç»“æœ

***

### **ğŸ”¹ å¤„ç†æŸ¥è¯¢å¹¶æ‰§è¡Œå·¥å…·è°ƒç”¨**

åœ¨ `client.py` ä¸­æ·»åŠ ä»¥ä¸‹æ–¹æ³•ï¼š

```python
async def process_query(self, query: str) -> str:
    """ä½¿ç”¨ Claude å¤„ç†æŸ¥è¯¢å¹¶è°ƒç”¨å¯ç”¨çš„ MCP å·¥å…·"""

    messages = [{"role": "user", "content": query}]
    # è·å– MCP æœåŠ¡å™¨ä¸Šæ³¨å†Œçš„å·¥å…·
    response = await self.session.list_tools()
    available_tools = [{
        "name": tool.name,
        "description": tool.description,
        "input_schema": tool.inputSchema
    } for tool in response.tools]
    # åˆæ¬¡å‘ Claude å‘é€è¯·æ±‚
    response = self.anthropic.messages.create(
        model="claude-3-5-sonnet-20241022",
        max_tokens=1000,
        messages=messages,
        tools=available_tools
    )
    final_text = []
    assistant_message_content = []
    # è§£æ Claude çš„å“åº”
    for content in response.content:
        if content.type == 'text':
            final_text.append(content.text)
            assistant_message_content.append(content)
        elif content.type == 'tool_use':
            tool_name = content.name
            tool_args = content.input
            # é€šè¿‡ MCP æœåŠ¡å™¨è°ƒç”¨å·¥å…·
            result = await self.session.call_tool(tool_name, tool_args)
            final_text.append(f"[è°ƒç”¨å·¥å…· {tool_name}ï¼Œå‚æ•°: {tool_args}]")
            assistant_message_content.append(content)
            messages.append({"role": "assistant", "content": assistant_message_content})
            messages.append({
                "role": "user",
                "content": [{
                    "type": "tool_result",
                    "tool_use_id": content.id,
                    "content": result.content
                }]
            })
            # å†æ¬¡å‘ Claude å‘é€è¯·æ±‚ï¼Œè·å–æœ€ç»ˆå›ç­”
            response = self.anthropic.messages.create(
                model="claude-3-5-sonnet-20241022",
                max_tokens=1000,
                messages=messages,
                tools=available_tools
            )
            final_text.append(response.content[0].text)
    return "\n".join(final_text)
```

ğŸ“Œ **ä¸»è¦é€»è¾‘**ï¼š

1. è·å– MCP æœåŠ¡å™¨ä¸Šå¯ç”¨çš„å·¥å…·

2. å‘ Claude å‘é€è¯·æ±‚ï¼Œ**è®© Claude å†³å®šæ˜¯å¦è°ƒç”¨å·¥å…·**

3. è§£æ Claude çš„å“åº”ï¼š&#x20;

   * å¦‚æœæ˜¯æ™®é€šæ–‡æœ¬ï¼Œç›´æ¥å­˜å‚¨

   * å¦‚æœæ˜¯å·¥å…·è°ƒç”¨ï¼Œåˆ™é€šè¿‡ MCP æœåŠ¡å™¨æ‰§è¡Œå·¥å…·ï¼Œå¹¶è¿”å›ç»“æœ

4. å‘é€æœ€ç»ˆçš„ Claude è¯·æ±‚ï¼Œ**è®© Claude ç”Ÿæˆå®Œæ•´çš„å›å¤**

***

### **ğŸ”¹ äº¤äº’å¼èŠå¤©ç•Œé¢**

æˆ‘ä»¬ç°åœ¨æ·»åŠ  **äº¤äº’å¼èŠå¤©å¾ªç¯**ï¼Œè®©ç”¨æˆ·å¯ä»¥è¾“å…¥æŸ¥è¯¢ï¼Œå¹¶æŸ¥çœ‹ Claude çš„å›ç­”ã€‚

```python
async def chat_loop(self):
    """è¿è¡Œäº¤äº’å¼èŠå¤©ä¼šè¯"""
    print("\nğŸš€ MCP å®¢æˆ·ç«¯å·²å¯åŠ¨ï¼")
    print("è¾“å…¥ä½ çš„æŸ¥è¯¢ï¼Œæˆ–è¾“å…¥ 'quit' é€€å‡ºã€‚")
    while True:
        try:
            query = input("\nQuery: ").strip()
            if query.lower() == 'quit':
                break
            response = await self.process_query(query)
            print("\n" + response)
        except Exception as e:
            print(f"\nâš ï¸ å‘ç”Ÿé”™è¯¯: {str(e)}")
async def cleanup(self):
    """æ¸…ç†èµ„æº"""
    await self.exit_stack.aclose()
```

ğŸ“Œ **ä¸»è¦åŠŸèƒ½**ï¼š

* æç¤ºç”¨æˆ·è¾“å…¥æŸ¥è¯¢

* é€šè¿‡ `process_query()` å¤„ç†æŸ¥è¯¢ï¼Œå¹¶è¿”å›ç»“æœ

* æ”¯æŒ `quit` å‘½ä»¤é€€å‡ºä¼šè¯

* å¤„ç†å¯èƒ½çš„é”™è¯¯

***

### **ğŸ”¹ ä¸»ç¨‹åºå…¥å£**

æœ€åï¼Œæˆ‘ä»¬æ·»åŠ  **`main()`** å…¥å£ï¼Œè®©ç¨‹åºå¯ä»¥æ¥å—å‘½ä»¤è¡Œå‚æ•°ï¼ŒæŒ‡å®š **è¦è¿æ¥çš„ MCP æœåŠ¡å™¨**ã€‚

```python
async def main():
    if len(sys.argv) < 2:
        print("ä½¿ç”¨æ–¹æ³•: python client.py <æœåŠ¡å™¨è„šæœ¬è·¯å¾„>")
        sys.exit(1)
    client = MCPClient()
    try:
        await client.connect_to_server(sys.argv[1])
        await client.chat_loop()
    finally:
        await client.cleanup()
if 
name
 == "
__main__
":
    import sys
    asyncio.run(main())
```

ğŸ“Œ **æ‰§è¡Œæµç¨‹**ï¼š

1. **æ£€æŸ¥æ˜¯å¦æä¾›äº†æœåŠ¡å™¨è·¯å¾„**

2. **åˆå§‹åŒ– MCP å®¢æˆ·ç«¯** å¹¶è¿æ¥ MCP æœåŠ¡å™¨

3. **å¯åŠ¨äº¤äº’å¼èŠå¤©ä¼šè¯**

4. **æ¸…ç†èµ„æºå¹¶é€€å‡º**

***

## **ğŸ’¡ å…³é”®ç»„ä»¶è§£æ**

1ï¸âƒ£ **å®¢æˆ·ç«¯åˆå§‹åŒ–**

* `MCPClient` è´Ÿè´£ç®¡ç† **MCP ä¼šè¯** å’Œ **Claude API**

* ä½¿ç”¨ `AsyncExitStack` **ç¡®ä¿èµ„æºæ­£ç¡®é‡Šæ”¾**

* é…ç½® **Anthropic å®¢æˆ·ç«¯** ç”¨äº Claude äº¤äº’

2ï¸âƒ£ **è¿æ¥ MCP æœåŠ¡å™¨**

* **æ”¯æŒ Python å’Œ Node.js æœåŠ¡å™¨**

* **éªŒè¯æœåŠ¡å™¨è„šæœ¬æ ¼å¼**

* **å»ºç«‹ä¼šè¯å¹¶åˆ—å‡º MCP æœåŠ¡å™¨ä¸Šçš„å¯ç”¨å·¥å…·**

3ï¸âƒ£ **å¤„ç†æŸ¥è¯¢**

* **ç»´æŒå¯¹è¯ä¸Šä¸‹æ–‡**

* **è§£æ Claude çš„å“åº”ï¼Œå¹¶æ‰§è¡Œå·¥å…·è°ƒç”¨**

* **ç®¡ç† Claude ä¸ MCP å·¥å…·ä¹‹é—´çš„æ¶ˆæ¯æµ**

* **æ•´åˆå·¥å…·è¿”å›çš„ç»“æœï¼Œç”Ÿæˆæœ€ç»ˆå›å¤**

4ï¸âƒ£ **äº¤äº’ç•Œé¢**

* **æä¾›ç®€å•çš„ CLI ç•Œé¢**

* **æ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶æ˜¾ç¤º AI å“åº”**

* **æ”¯æŒå®‰å…¨é€€å‡º**

* **åŒ…å«åŸºç¡€é”™è¯¯å¤„ç†**

5ï¸âƒ£ **èµ„æºç®¡ç†**

* **ç¡®ä¿èµ„æºæ­£ç¡®æ¸…ç†**

* **å¤„ç†è¿æ¥é—®é¢˜**

* **å®ç°ä¼˜é›…é€€å‡º**

***

## **ğŸ› ï¸ å¸¸è§è‡ªå®šä¹‰ç‚¹**

ğŸ”¹ **å·¥å…·è°ƒç”¨**

* åœ¨ `process_query()` ä¸­ **è‡ªå®šä¹‰å·¥å…·è°ƒç”¨é€»è¾‘**

* æ·»åŠ  **ç‰¹å®šå·¥å…·çš„é”™è¯¯å¤„ç†**

* è¿›è¡Œ **å·¥å…·ç»“æœæ ¼å¼åŒ–**

ğŸ”¹ **å“åº”å¤„ç†**

* è‡ªå®šä¹‰ **å·¥å…·è°ƒç”¨ç»“æœæ ¼å¼**

* **å¢åŠ å“åº”è¿‡æ»¤** æˆ– **è½¬æ¢**

* æ·»åŠ  **æ—¥å¿—è®°å½•**

ğŸ”¹ **ç”¨æˆ·ç•Œé¢**

* **å¢åŠ  GUI æˆ– Web ç•Œé¢**

* **ä¼˜åŒ– CLI è¾“å‡º**

* **æ”¯æŒå†å²è®°å½•æˆ–è‡ªåŠ¨è¡¥å…¨**

***

## **ğŸš€ è¿è¡Œ MCP å®¢æˆ·ç«¯**

### **ğŸ“Œ è¿è¡Œ MCP å®¢æˆ·ç«¯**

```bash
uv run client.py path/to/server.py   # è¿æ¥ Python æœåŠ¡å™¨
uv run client.py path/to/build/index.js   # è¿æ¥ Node.js æœåŠ¡å™¨
```

ğŸ“Œ **ç¤ºä¾‹**ï¼ˆè¿æ¥å¤©æ°”æœåŠ¡å™¨ï¼‰ï¼š

```bash
python client.py ~/projects/weather/src/weather/server.py
```

**MCP å®¢æˆ·ç«¯å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š** âœ… è¿æ¥åˆ° MCP æœåŠ¡å™¨
&#x20;âœ… åˆ—å‡ºå¯ç”¨çš„ MCP å·¥å…·
&#x20;âœ… å¯åŠ¨äº¤äº’å¼èŠå¤©ç•Œé¢
&#x20;âœ… å…è®¸ç”¨æˆ·è¾“å…¥æŸ¥è¯¢ï¼Œ**æ‰§è¡Œå·¥å…·è°ƒç”¨**ï¼Œå¹¶ **è·å– Claude çš„å“åº”**

![](images/image-14.png)

***

## **ğŸ” MCP æŸ¥è¯¢å¤„ç†æµç¨‹**

å½“ä½ è¾“å…¥ä¸€ä¸ªæŸ¥è¯¢æ—¶ï¼ŒMCP æœåŠ¡å™¨çš„å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š 1ï¸âƒ£ **å®¢æˆ·ç«¯è·å– MCP æœåŠ¡å™¨ä¸Šçš„å·¥å…·åˆ—è¡¨**
&#x20;2ï¸âƒ£ **å‘ Claude å‘é€æŸ¥è¯¢ï¼Œå¹¶é™„å¸¦å·¥å…·ä¿¡æ¯**
&#x20;3ï¸âƒ£ **Claude é€‰æ‹©é€‚å½“çš„å·¥å…·ï¼ˆå¦‚æœéœ€è¦ï¼‰**
&#x20;4ï¸âƒ£ **å®¢æˆ·ç«¯é€šè¿‡ MCP æœåŠ¡å™¨æ‰§è¡Œå·¥å…·è°ƒç”¨**
&#x20;5ï¸âƒ£ **å·¥å…·è¿”å›ç»“æœï¼Œå¹¶ä¼ é€’ç»™ Claude**
&#x20;6ï¸âƒ£ **Claude ç”Ÿæˆæœ€ç»ˆçš„è‡ªç„¶è¯­è¨€å›å¤**
&#x20;7ï¸âƒ£ **å“åº”æ˜¾ç¤ºåœ¨ç»ˆç«¯** ğŸ‰

***

## **âœ… æœ€ä½³å®è·µ**

### **ğŸ› ï¸ é”™è¯¯å¤„ç†**

* **å§‹ç»ˆä½¿ç”¨ `try-except` å¤„ç†å·¥å…·è°ƒç”¨**

* **æä¾›æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯**

* **ä¼˜é›…å¤„ç†æœåŠ¡å™¨è¿æ¥é—®é¢˜**

### **ğŸ“Œ èµ„æºç®¡ç†**

* **ä½¿ç”¨ `AsyncExitStack` è¿›è¡Œèµ„æºç®¡ç†**

* **åœ¨ç¨‹åºé€€å‡ºæ—¶é‡Šæ”¾è¿æ¥**

* **å¤„ç†æœåŠ¡å™¨æ–­è¿æƒ…å†µ**

### **ğŸ”’ å®‰å…¨æ€§**

* **API Key å­˜å‚¨åœ¨ `.env` æ–‡ä»¶ä¸­**

* **éªŒè¯æœåŠ¡å™¨è¿”å›çš„æ•°æ®**

* **è°¨æ…ç®¡ç†å·¥å…·è°ƒç”¨æƒé™**

***

## **ğŸ› ï¸ æ•…éšœæ’æŸ¥**

### **ğŸ”¹ æœåŠ¡å™¨è·¯å¾„é—®é¢˜**

* ç¡®ä¿æœåŠ¡å™¨è·¯å¾„æ­£ç¡®

* **ä½¿ç”¨ç»å¯¹è·¯å¾„**ï¼Œé¿å…ç›¸å¯¹è·¯å¾„é—®é¢˜

* Windows ç”¨æˆ·è¯·ç¡®ä¿è·¯å¾„æ ¼å¼æ­£ç¡®ï¼š&#x20;

```bash
uv run client.py C:/projects/mcp-server/weather.py
```

### **ğŸ”¹ å“åº”æ—¶é—´**

* **é¦–æ¬¡å“åº”å¯èƒ½éœ€è¦ 30 ç§’**ï¼ˆåˆå§‹åŒ– & å¤„ç†è¯·æ±‚ï¼‰

* **åç»­è¯·æ±‚ä¼šæ›´å¿«**

* **è¯·å‹¿åœ¨åˆæ¬¡è¯·æ±‚æ—¶ä¸­æ–­è¿›ç¨‹**

### **ğŸ”¹ å¸¸è§é”™è¯¯**

* `FileNotFoundError`ï¼šæ£€æŸ¥ **æœåŠ¡å™¨è·¯å¾„**

* `Connection refused`ï¼šç¡®ä¿ **æœåŠ¡å™¨å·²è¿è¡Œ**

* `Tool execution failed`ï¼šç¡®è®¤ **ç¯å¢ƒå˜é‡å·²æ­£ç¡®è®¾ç½®**

* `Timeout error`ï¼šè€ƒè™‘å¢åŠ è¶…æ—¶æ—¶é—´

***



MCP Python SDKï¼šhttps://github.com/modelcontextprotocol/python-sdk

![](images/image-15.png)

# **MCP Python SDK**

### **ğŸ“Œ MCP SDK ç›¸å…³å†…å®¹**

MCP SDK æä¾›äº†ä¸€å¥— **æ ‡å‡†åŒ–** çš„å·¥å…·ï¼Œè®©åº”ç”¨èƒ½å¤Ÿä¸ **LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰** äº¤äº’ï¼ŒåŒæ—¶å°†æ•°æ®å’ŒåŠŸèƒ½ **å®‰å…¨ã€æ ‡å‡†åŒ–** åœ°æš´éœ²ç»™ LLM åº”ç”¨ç¨‹åºã€‚

***

## **ğŸ“– ç›®å½•**

1ï¸âƒ£ **æ¦‚è§ˆï¼ˆOverviewï¼‰**
&#x20;2ï¸âƒ£ **å®‰è£…ï¼ˆInstallationï¼‰**
&#x20;3ï¸âƒ£ **å¿«é€Ÿå…¥é—¨ï¼ˆQuickstartï¼‰**
&#x20;4ï¸âƒ£ **ä»€ä¹ˆæ˜¯ MCPï¼Ÿï¼ˆWhat is MCP?ï¼‰**
&#x20;5ï¸âƒ£ **æ ¸å¿ƒæ¦‚å¿µï¼ˆCore Conceptsï¼‰**

* **æœåŠ¡å™¨ï¼ˆServerï¼‰**

* **èµ„æºï¼ˆResourcesï¼‰**

* **å·¥å…·ï¼ˆToolsï¼‰**

* **æç¤ºè¯ï¼ˆPromptsï¼‰**

* **å›¾ç‰‡ï¼ˆImagesï¼‰**

* **ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰**
  &#x20;6ï¸âƒ£ **è¿è¡ŒæœåŠ¡å™¨ï¼ˆRunning Your Serverï¼‰**

* **å¼€å‘æ¨¡å¼ï¼ˆDevelopment Modeï¼‰**

* **Claude Desktop é›†æˆï¼ˆClaude Desktop Integrationï¼‰**

* **ç›´æ¥æ‰§è¡Œï¼ˆDirect Executionï¼‰**
  &#x20;7ï¸âƒ£ **ç¤ºä¾‹ï¼ˆExamplesï¼‰**

* **å›å£°æœåŠ¡å™¨ï¼ˆEcho Serverï¼‰**

* **SQLite æ•°æ®æµè§ˆå™¨ï¼ˆSQLite Explorerï¼‰**
  &#x20;8ï¸âƒ£ **é«˜çº§ç”¨æ³•ï¼ˆAdvanced Usageï¼‰**

* **ä½çº§æœåŠ¡å™¨å®ç°ï¼ˆLow-Level Serverï¼‰**

* **ç¼–å†™ MCP å®¢æˆ·ç«¯ï¼ˆWriting MCP Clientsï¼‰**

* **MCP åŸºç¡€æ“ä½œï¼ˆMCP Primitivesï¼‰**

* **æœåŠ¡å™¨èƒ½åŠ›ï¼ˆServer Capabilitiesï¼‰**
  &#x20;9ï¸âƒ£ **æ–‡æ¡£ï¼ˆDocumentationï¼‰**
  &#x20;ğŸ”Ÿ **è´¡çŒ®ï¼ˆContributingï¼‰**
  &#x20;1ï¸âƒ£1ï¸âƒ£ **è®¸å¯è¯ï¼ˆLicenseï¼‰**

***

## **ğŸ“Œ æ¦‚è§ˆ**

**æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰** å…è®¸åº”ç”¨ç¨‹åº **æ ‡å‡†åŒ–åœ°** å‘ LLM æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»è€Œå°† **ä¸Šä¸‹æ–‡ç®¡ç†** ä¸ **LLM äº¤äº’** åˆ†ç¦»å¼€æ¥ã€‚

ğŸ“Œ **è¿™ä¸ª Python SDK æä¾›å®Œæ•´çš„ MCP è§„èŒƒå®ç°ï¼Œä½¿ä½ å¯ä»¥è½»æ¾å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š** âœ… **æ„å»º MCP å®¢æˆ·ç«¯**ï¼Œå¯è¿æ¥åˆ°ä»»ä½• MCP æœåŠ¡å™¨
&#x20;âœ… **åˆ›å»º MCP æœåŠ¡å™¨**ï¼Œå‘ LLM **æä¾›èµ„æºã€å·¥å…·å’Œæç¤ºè¯**
&#x20;âœ… **ä½¿ç”¨æ ‡å‡†åŒ–é€šä¿¡æ–¹å¼**ï¼ˆå¦‚ `stdio` å’Œ `SSE`ï¼‰
&#x20;âœ… **ç®¡ç† MCP åè®®çš„æ¶ˆæ¯æµä¸ç”Ÿå‘½å‘¨æœŸ**

***

## **ğŸ“Œ å®‰è£…**

æˆ‘ä»¬æ¨èä½¿ç”¨ **uv** æ¥ç®¡ç† Python é¡¹ç›®ï¼š

```bash
uv add "mcp[cli]"
```

**æˆ–è€…ä½¿ç”¨ `pip` ç›´æ¥å®‰è£…ï¼š**

```bash
pip install mcp
```

***

## **ğŸš€ å¿«é€Ÿå…¥é—¨**

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„ **MCP æœåŠ¡å™¨**ï¼Œå®ƒåŒ…å«ï¼š

* **ä¸€ä¸ªè®¡ç®—å™¨å·¥å…·**

* **ä¸€ä¸ªä¸ªæ€§åŒ–é—®å€™èµ„æº**

ğŸ“Œ **åˆ›å»º `server.py` æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š**

```python
# server.py
from mcp.server.fastmcp import FastMCP

# Create an MCP server
mcp = FastMCP("Demo")

# Add an addition tool
@mcp.tool()
def add(a: int, b: int) -> int:
    """Add two numbers"""
    return a + b

# Add a dynamic greeting resource
@mcp.resource("greeting://{name}")
def get_greeting(name: str) -> str:
    """Get a personalized greeting"""
    return f"Hello, {name}!"
```

ğŸ“Œ **åœ¨ Claude Desktop ä¸­å®‰è£…å¹¶è¿è¡Œè¯¥æœåŠ¡å™¨ï¼š**

```bash
mcp install server.py
```

ğŸ“Œ **æˆ–è€…ä½¿ç”¨ MCP Inspector æµ‹è¯•ï¼š**

```bash
mcp dev server.py
```

***

## **ğŸ¤” ä»€ä¹ˆæ˜¯ MCPï¼Ÿ**

**MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰** å…è®¸ä½ æ„å»º **æœåŠ¡å™¨**ï¼Œå‘ LLM **å®‰å…¨ã€æ ‡å‡†åŒ–** åœ°æš´éœ²æ•°æ®å’ŒåŠŸèƒ½ã€‚å¯ä»¥æŠŠ MCP æœåŠ¡å™¨æƒ³è±¡æˆ **ä¸“é—¨ä¸º LLM è®¾è®¡çš„ Web API**ã€‚

ğŸ“Œ **MCP æœåŠ¡å™¨å¯ä»¥ï¼š**&#x20;

&#x20;âœ… **é€šè¿‡èµ„æºï¼ˆResourcesï¼‰æš´éœ²æ•°æ®**ï¼ˆç±»ä¼¼äº `GET` APIï¼‰
&#x20;âœ… **é€šè¿‡å·¥å…·ï¼ˆToolsï¼‰æä¾›åŠŸèƒ½**ï¼ˆç±»ä¼¼äº `POST` APIï¼‰
&#x20;âœ… **é€šè¿‡æç¤ºè¯ï¼ˆPromptsï¼‰å®šä¹‰äº¤äº’æ¨¡å¼**ï¼ˆå¯å¤ç”¨çš„ LLM æ¨¡æ¿ï¼‰

***

## **ğŸ”¹ æ ¸å¿ƒæ¦‚å¿µ**

### **1ï¸âƒ£ æœåŠ¡å™¨ï¼ˆServerï¼‰**

MCP æœåŠ¡å™¨æ˜¯ **MCP åè®®çš„æ ¸å¿ƒæ¥å£**ï¼Œå®ƒç®¡ç†ï¼š&#x20;

&#x20;âœ… **è¿æ¥**
&#x20;âœ… **åè®®åˆè§„æ€§**
&#x20;âœ… **æ¶ˆæ¯è·¯ç”±**

ğŸ“Œ **ç¤ºä¾‹ï¼š**

```python
# æ·»åŠ æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
from dataclasses import dataclass
from typing import AsyncIterator
from mcp.server.fastmcp import FastMCP
# åˆ›å»ºå‘½åæœåŠ¡å™¨
mcp = FastMCP("My App")
# æŒ‡å®šä¾èµ–é¡¹ï¼ˆå¦‚ pandasã€numpyï¼‰
mcp = FastMCP("My App", dependencies=["pandas", "numpy"])
@dataclass
class AppContext:
    db: Database  # è¿™é‡Œæ›¿æ¢ä¸ºä½ çš„å®é™…æ•°æ®åº“ç±»å‹
@asynccontextmanager
async def app_lifespan(server: FastMCP) -> AsyncIterator[AppContext]:
    """ä½¿ç”¨ç±»å‹å®‰å…¨çš„ä¸Šä¸‹æ–‡ç®¡ç†åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸ"""
    try:
        await db.connect()
        yield AppContext(db=db)
    finally:
        await db.disconnect()
# ä¼ é€’ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨ç»™ MCP æœåŠ¡å™¨
mcp = FastMCP("My App", lifespan=app_lifespan)
# åœ¨å·¥å…·å‡½æ•°ä¸­è®¿é—®ç”Ÿå‘½å‘¨æœŸä¸Šä¸‹æ–‡
@mcp.tool()
def query_db(ctx: Context) -> str:
    """ä½¿ç”¨æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢"""
    db = ctx.request_context.lifespan_context["db"]
    return db.query()
```

ğŸ“Œ **ä»¥ä¸Šä»£ç ç¡®ä¿ MCP æœåŠ¡å™¨åœ¨å¯åŠ¨å’Œå…³é—­æ—¶æ­£ç¡®ç®¡ç†èµ„æºï¼ˆå¦‚æ•°æ®åº“è¿æ¥ï¼‰ã€‚**

***

### **2ï¸âƒ£ èµ„æºï¼ˆResourcesï¼‰**

ğŸ“Œ **èµ„æºç”¨äºå‘ LLM æš´éœ²æ•°æ®**ï¼Œç±»ä¼¼äº **REST API çš„ `GET` ç«¯ç‚¹**ã€‚
&#x20;âœ… **ä¸åº”æ‰§è¡Œå¤æ‚è®¡ç®—æˆ–äº§ç”Ÿå‰¯ä½œç”¨**

#### **ğŸ“Œ ç¤ºä¾‹ï¼šé™æ€é…ç½®**

```python
@mcp.resource("config://app")
def get_config() -> str:
    """æä¾›é™æ€åº”ç”¨é…ç½®"""
    return "App é…ç½®ä¿¡æ¯"
```

#### **ğŸ“Œ ç¤ºä¾‹ï¼šåŠ¨æ€ç”¨æˆ·æ•°æ®**

```python
@mcp.resource("users://{user_id}/profile")
def get_user_profile(user_id: str) -> str:
    """æä¾›åŠ¨æ€ç”¨æˆ·æ•°æ®"""
    return f"ç”¨æˆ· {user_id} çš„ä¸ªäººèµ„æ–™"
```

ğŸ“Œ **èµ„æºçš„ä½œç”¨ï¼š**&#x20;

&#x20;âœ… è®© LLM **åŠ è½½æ•°æ®åˆ°ä¸Šä¸‹æ–‡**ï¼Œå¸®åŠ©ç”Ÿæˆæ›´å‡†ç¡®çš„å›ç­”
&#x20;âœ… **æ”¯æŒé™æ€å’ŒåŠ¨æ€æ•°æ®**
&#x20;âœ… **å¯ä»¥ç»“åˆ LLM çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æœºåˆ¶**

### **ğŸ“Œ MCP SDK è¿›é˜¶æŒ‡å—**

MCP SDK æä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–å·¥å…·ï¼Œè®©åº”ç”¨å¯ä»¥é€šè¿‡ **èµ„æºï¼ˆResourcesï¼‰ã€å·¥å…·ï¼ˆToolsï¼‰å’Œæç¤ºè¯ï¼ˆPromptsï¼‰**ï¼Œä»¥**å®‰å…¨ã€æ ‡å‡†åŒ–**çš„æ–¹å¼ä¸ LLM è¿›è¡Œäº¤äº’ã€‚

***

## **ğŸ”¹ å·¥å…·ï¼ˆToolsï¼‰**

**å·¥å…·ï¼ˆToolsï¼‰** å…è®¸ LLM é€šè¿‡ MCP æœåŠ¡å™¨æ‰§è¡Œæ“ä½œã€‚ä¸ **èµ„æºï¼ˆResourcesï¼‰** ä¸åŒï¼Œå·¥å…·é€šå¸¸æ¶‰åŠ **è®¡ç®—** å¹¶ **å¯èƒ½äº§ç”Ÿå‰¯ä½œç”¨**ã€‚

ğŸ“Œ **ç¤ºä¾‹ï¼šè®¡ç®— BMI**

```python
@mcp.tool()
def calculate_bmi(weight_kg: float, height_m: float) -> float:
    """æ ¹æ®ä½“é‡ï¼ˆkgï¼‰å’Œèº«é«˜ï¼ˆmï¼‰è®¡ç®— BMI"""
    return weight_kg / (height_m ** 2)
```

ğŸ“Œ **ç¤ºä¾‹ï¼šè·å–å¤©æ°”ä¿¡æ¯**

```python
import httpx
@mcp.tool()
async def fetch_weather(city: str) -> str:
    """è·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”"""
    async with httpx.AsyncClient() as client:
        response = await client.get(f"https://api.weather.com/{city}")
        return response.text
```

âœ… **å·¥å…·çš„ä½œç”¨**

* **æ‰§è¡Œè®¡ç®—**

* **è¿›è¡Œ API è°ƒç”¨**

* **æ”¯æŒå¼‚æ­¥æ“ä½œ**

***

## **ğŸ”¹ æç¤ºè¯ï¼ˆPromptsï¼‰**

**æç¤ºè¯ï¼ˆPromptsï¼‰** æ˜¯ **å¯å¤ç”¨æ¨¡æ¿**ï¼Œå¸®åŠ© LLM ä»¥æ ‡å‡†åŒ–æ–¹å¼ä¸ MCP æœåŠ¡å™¨äº¤äº’ã€‚

ğŸ“Œ **ç¤ºä¾‹ï¼šä»£ç å®¡æŸ¥**

```python
@mcp.prompt()
def review_code(code: str) -> str:
    return f"è¯·å®¡æŸ¥ä»¥ä¸‹ä»£ç ï¼š\n\n{code}"
```

ğŸ“Œ **ç¤ºä¾‹ï¼šè°ƒè¯•é”™è¯¯**

```python
@mcp.prompt()
def debug_error(error: str) -> list[Message]:
    return [
        UserMessage("æˆ‘é‡åˆ°äº†è¿™ä¸ªé”™è¯¯ï¼š"),
        UserMessage(error),
        AssistantMessage("æˆ‘æ¥å¸®ä½ è°ƒè¯•ã€‚ä½ ç›®å‰å°è¯•äº†å“ªäº›æ–¹æ³•ï¼Ÿ")
    ]
```

âœ… **æç¤ºè¯çš„ä½œç”¨**

* **åˆ›å»ºæ ‡å‡†åŒ– LLM äº¤äº’æ¨¡æ¿**

* **æä¾›ä¸Šä¸‹æ–‡ï¼Œä½¿ LLM ç”Ÿæˆæ›´ç²¾å‡†çš„å“åº”**

* **æ”¯æŒç»“æ„åŒ–å¯¹è¯**

***

## **ğŸ”¹ å›¾ç‰‡å¤„ç†ï¼ˆImagesï¼‰**

FastMCP æä¾› **`Image`** ç±»ï¼Œå¯ç”¨äº **è‡ªåŠ¨å¤„ç†å›¾ç‰‡æ•°æ®**ã€‚

ğŸ“Œ **ç¤ºä¾‹ï¼šç”Ÿæˆç¼©ç•¥å›¾**

```python
from mcp.server.fastmcp import FastMCP, Image
from PIL import Image as PILImage
@mcp.tool()
def create_thumbnail(image_path: str) -> Image:
    """æ ¹æ®å›¾ç‰‡è·¯å¾„åˆ›å»ºç¼©ç•¥å›¾"""
    img = PILImage.open(image_path)
    img.thumbnail((100, 100))
    return Image(data=img.tobytes(), format="png")
```

âœ… **å›¾ç‰‡åŠŸèƒ½**

* **æ”¯æŒ `Image` ç±»è¿›è¡Œå›¾ç‰‡æ•°æ®å°è£…**

* **å¯ç”¨äº LLM ç”Ÿæˆçš„å¤šæ¨¡æ€åº”ç”¨**

***

## **ğŸ”¹ ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆContextï¼‰**

`Context` å¯¹è±¡å¯ä»¥è®©å·¥å…·å’Œèµ„æº **è®¿é—® MCP æœåŠ¡å™¨çš„å†…éƒ¨èƒ½åŠ›**ï¼Œå¦‚ **æ—¥å¿—è®°å½•ã€è¿›åº¦è·Ÿè¸ªã€æ–‡ä»¶è¯»å–ç­‰**ã€‚

ğŸ“Œ **ç¤ºä¾‹ï¼šæ‰¹é‡å¤„ç†å¤šä¸ªæ–‡ä»¶**

```python
from mcp.server.fastmcp import FastMCP, Context
@mcp.tool()
async def long_task(files: list[str], ctx: Context) -> str:
    """å¤„ç†å¤šä¸ªæ–‡ä»¶ï¼Œå¹¶æä¾›è¿›åº¦è·Ÿè¸ª"""
    for i, file in enumerate(files):
        ctx.info(f"æ­£åœ¨å¤„ç† {file}")
        await ctx.report_progress(i, len(files))
        data, mime_type = await ctx.read_resource(f"file://{file}")
    return "æ‰€æœ‰æ–‡ä»¶å¤„ç†å®Œæˆ"
```

âœ… **ä¸Šä¸‹æ–‡çš„ä½œç”¨**

* **æ”¯æŒè¿›åº¦è·Ÿè¸ª**

* **æ”¯æŒæ—¥å¿—è®°å½•**

* **å¯ä»¥è¯»å– MCP æœåŠ¡å™¨çš„èµ„æº**

***

## **ğŸš€ è¿è¡Œ MCP æœåŠ¡å™¨**

### **1ï¸âƒ£ å¼€å‘æ¨¡å¼**

ä½¿ç”¨ **MCP Inspector** è¿›è¡Œå¿«é€Ÿæµ‹è¯•ï¼š

```bash
mcp dev server.py
```

ğŸ“Œ **æ·»åŠ ä¾èµ–é¡¹**

```bash
mcp dev server.py --with pandas --with numpy
```

ğŸ“Œ **æŒ‚è½½æœ¬åœ°ä»£ç **

```bash
mcp dev server.py --with-editable .
```

***

### **2ï¸âƒ£ Claude Desktop é›†æˆ**

ğŸ“Œ **å®‰è£… MCP æœåŠ¡å™¨**

```bash
mcp install server.py
```

ğŸ“Œ **è‡ªå®šä¹‰æœåŠ¡å™¨åç§°**

```bash
mcp install server.py --name "My Analytics Server"
```

ğŸ“Œ **ä¼ é€’ç¯å¢ƒå˜é‡**

```bash
mcp install server.py -v API_KEY=abc123 -v DB_URL=postgres://...
mcp install server.py -f .env
```

***

### **3ï¸âƒ£ ç›´æ¥æ‰§è¡Œ MCP æœåŠ¡å™¨**

ğŸ“Œ **Python æ–¹å¼**

```python
from mcp.server.fastmcp import FastMCP
mcp = FastMCP("My App")
if name == "__main__":
    mcp.run()
```

ğŸ“Œ **è¿è¡ŒæœåŠ¡å™¨**

```python
python server.py
# æˆ–è€…
mcp run server.py
```

***

## **ğŸ› ï¸ ç¤ºä¾‹**

### **1ï¸âƒ£ Echo æœåŠ¡å™¨**

ğŸ“Œ **ç¤ºä¾‹ï¼šåˆ›å»º MCP æœåŠ¡å™¨ï¼Œå›æ˜¾æ¶ˆæ¯**

```python
from mcp.server.fastmcp import FastMCP
mcp = FastMCP("Echo")
@mcp.resource("echo://{message}")
def echo_resource(message: str) -> str:
    """å›æ˜¾æ¶ˆæ¯ï¼ˆèµ„æºï¼‰"""
    return f"Resource echo: {message}"
@mcp.tool()
def echo_tool(message: str) -> str:
    """å›æ˜¾æ¶ˆæ¯ï¼ˆå·¥å…·ï¼‰"""
    return f"Tool echo: {message}"
@mcp.prompt()
def echo_prompt(message: str) -> str:
    """åˆ›å»ºå›æ˜¾æç¤ºè¯"""
    return f"è¯·å¤„ç†æ­¤æ¶ˆæ¯: {message}"
```

***

### **2ï¸âƒ£ SQLite æ•°æ®æµè§ˆå™¨**

ğŸ“Œ **ç¤ºä¾‹ï¼šä½¿ç”¨ SQLite æ•°æ®åº“**

```python
from mcp.server.fastmcp import FastMCP
import sqlite3
mcp = FastMCP("SQLite Explorer")
@mcp.resource("schema://main")
def get_schema() -> str:
    """è¿”å›æ•°æ®åº“æ¶æ„"""
    conn = sqlite3.connect("database.db")
    schema = conn.execute(
        "SELECT sql FROM sqlite_master WHERE type='table'"
    ).fetchall()
    return "\n".join(sql[0] for sql in schema if sql[0])
@mcp.tool()
def query_data(sql: str) -> str:
    """æ‰§è¡Œ SQL æŸ¥è¯¢"""
    conn = sqlite3.connect("database.db")
    try:
        result = conn.execute(sql).fetchall()
        return "\n".join(str(row) for row in result)
    except Exception as e:
        return f"é”™è¯¯: {str(e)}"
```

***

## **âš™ï¸ è¿›é˜¶ç”¨æ³•**

### **1ï¸âƒ£ ä½çº§æœåŠ¡å™¨ï¼ˆLow-Level Serverï¼‰**

å¦‚æœéœ€è¦ **å®Œå…¨æ§åˆ¶ MCP æœåŠ¡å™¨**ï¼Œå¯ä»¥ä½¿ç”¨ä½çº§ APIï¼š

```python
from contextlib import asynccontextmanager
from typing import AsyncIterator
@asynccontextmanager
async def server_lifespan(server: Server) -> AsyncIterator[dict]:
    """ç®¡ç†æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸ"""
    try:
        await db.connect()
        yield {"db": db}
    finally:
        await db.disconnect()
# ä¼ é€’ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨ç»™æœåŠ¡å™¨
server = Server("example-server", lifespan=server_lifespan)
```

âœ… **ä½çº§æœåŠ¡å™¨ API å…è®¸**ï¼š

* **åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åˆå§‹åŒ–èµ„æº**

* **åœ¨è¯·æ±‚å¤„ç†æœŸé—´è®¿é—®èµ„æº**

* **åœ¨æœåŠ¡å™¨å…³é—­æ—¶æ¸…ç†èµ„æº**

```python
from mcp.server.lowlevel import Server, NotificationOptions
from mcp.server.models import InitializationOptions
import mcp.server.stdio
import mcp.types as types

# Create a server instance
server = Server("example-server")

@server.list_prompts()
async def handle_list_prompts() -> list[types.Prompt]:
    return [
        types.Prompt(
            name="example-prompt",
            description="An example prompt template",
            arguments=[
                types.PromptArgument(
                    name="arg1",
                    description="Example argument",
                    required=True
                )
            ]
        )
    ]

@server.get_prompt()
async def handle_get_prompt(
    name: str,
    arguments: dict[str, str] | None
) -> types.GetPromptResult:
    if name != "example-prompt":
        raise ValueError(f"Unknown prompt: {name}")

    return types.GetPromptResult(
        description="Example prompt",
        messages=[
            types.PromptMessage(
                role="user",
                content=types.TextContent(
                    type="text",
                    text="Example prompt text"
                )
            )
        ]
    )

async def run():
    async with mcp.server.stdio.stdio_server() as (read_stream, write_stream):
        await server.run(
            read_stream,
            write_stream,
            InitializationOptions(
                server_name="example",
                server_version="0.1.0",
                capabilities=server.get_capabilities(
                    notification_options=NotificationOptions(),
                    experimental_capabilities={},
                )
            )
        )

if __name__ == "__main__":
    import asyncio
    asyncio.run(run())
```

***

## **ğŸ“Œ ç¼–å†™ MCP å®¢æˆ·ç«¯**

MCP SDK æä¾› **é«˜å±‚å®¢æˆ·ç«¯æ¥å£**ï¼Œå¯ç”¨äºè¿æ¥ MCP æœåŠ¡å™¨ï¼š

```python
from mcp import ClientSession, StdioServerParameters
from mcp.client.stdio import stdio_client

# Create server parameters for stdio connection
server_params = StdioServerParameters(
    command="python", # Executable
    args=["example_server.py"], # Optional command line arguments
    env=None # Optional environment variables
)

# Optional: create a sampling callback
async def handle_sampling_message(message: types.CreateMessageRequestParams) -> types.CreateMessageResult:
    return types.CreateMessageResult(
        role="assistant",
        content=types.TextContent(
            type="text",
            text="Hello, world! from model",
        ),
        model="gpt-3.5-turbo",
        stopReason="endTurn",
    )

async def run():
    async with stdio_client(server_params) as (read, write):
        async with ClientSession(read, write, sampling_callback=handle_sampling_message) as session:
            # Initialize the connection
            await session.initialize()

            # List available prompts
            prompts = await session.list_prompts()

            # Get a prompt
            prompt = await session.get_prompt("example-prompt", arguments={"arg1": "value"})

            # List available resources
            resources = await session.list_resources()

            # List available tools
            tools = await session.list_tools()

            # Read a resource
            content, mime_type = await session.read_resource("file://some/path")

            # Call a tool
            result = await session.call_tool("tool-name", arguments={"arg1": "value"})

if __name__ == "__main__":
    import asyncio
    asyncio.run(run())
```

***

### **ğŸ“Œ MCP åŸºæœ¬æ„ä»¶ï¼ˆMCP Primitivesï¼‰**

MCP åè®®å®šä¹‰äº† **ä¸‰ç§æ ¸å¿ƒæ„ä»¶ï¼ˆPrimitivesï¼‰**ï¼ŒMCP æœåŠ¡å™¨å¯ä»¥å®ç°è¿™äº›åŠŸèƒ½ï¼š

âœ… **æ€»ç»“**ï¼š

* **æç¤ºè¯ï¼ˆPromptsï¼‰**ï¼šç”¨æˆ·ä¸»åŠ¨é€‰æ‹©çš„äº¤äº’å¼æ¨¡æ¿ï¼Œä¾‹å¦‚å‘½ä»¤è¡Œå¿«æ·å‘½ä»¤

* **èµ„æºï¼ˆResourcesï¼‰**ï¼šç”±å®¢æˆ·ç«¯æä¾›çš„æ•°æ®ï¼Œä¾‹å¦‚é…ç½®æ–‡ä»¶ã€æ•°æ®åº“è®°å½•ã€API ç»“æœ

* **å·¥å…·ï¼ˆToolsï¼‰**ï¼šLLM å¯è°ƒç”¨çš„æ‰§è¡Œé€»è¾‘ï¼Œä¾‹å¦‚è®¡ç®—å‡½æ•°ã€æ•°æ®å­˜å‚¨ã€ç³»ç»Ÿæ“ä½œ

***

## **ğŸ“Œ æœåŠ¡å™¨èƒ½åŠ›ï¼ˆServer Capabilitiesï¼‰**

MCP æœåŠ¡å™¨åœ¨åˆå§‹åŒ–æ—¶ä¼š **å£°æ˜æ”¯æŒçš„åŠŸèƒ½**ï¼Œå³æœåŠ¡å™¨çš„èƒ½åŠ›ï¼ˆCapabilitiesï¼‰ã€‚

âœ… **æ€»ç»“**ï¼š

* **MCP æœåŠ¡å™¨åœ¨åˆå§‹åŒ–æ—¶ï¼Œå¿…é¡»å£°æ˜å…¶æ”¯æŒçš„èƒ½åŠ›**

* **å¦‚æœæœåŠ¡å™¨æ”¯æŒâ€œèµ„æºâ€ï¼ˆResourcesï¼‰ï¼Œå®ƒå¯ä»¥è®¢é˜…èµ„æºå˜æ›´**

* **å¦‚æœæœåŠ¡å™¨æ”¯æŒâ€œå·¥å…·â€ï¼ˆToolsï¼‰ï¼ŒLLM å¯ä»¥è‡ªåŠ¨å‘ç°å¯ç”¨å·¥å…·å¹¶è°ƒç”¨å®ƒä»¬**

***

## **ğŸ“Œ æ–‡æ¡£ï¼ˆDocumentationï¼‰**

* **ğŸ“„ Model Context Protocol æ–‡æ¡£**
  &#x20;ğŸ‘‰ [å®˜æ–¹ MCP æ–‡æ¡£](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)

* **ğŸ“œ Model Context Protocol è§„èŒƒ**
  &#x20;ğŸ‘‰ [MCP è¯¦ç»†æŠ€æœ¯è§„èŒƒ](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)

* **ğŸ”§ å®˜æ–¹æ”¯æŒçš„ MCP æœåŠ¡å™¨**
  &#x20;ğŸ‘‰ [å®˜æ–¹ MCP æœåŠ¡å™¨åˆ—è¡¨](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)

***

## **ğŸ“Œ è´¡çŒ® & è®¸å¯è¯**

ğŸ“Œ **è´¡çŒ®æŒ‡å—** æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å¼€å‘è€…å‚ä¸ MCP ç”Ÿæ€ï¼Œè¯¦ç»†æŒ‡å—è§ [è´¡çŒ®æ–‡æ¡£](https://chatgpt.com/c/67d28a8b-9e64-8000-bff6-da16089a3f12#)ã€‚

ğŸ“Œ **è®¸å¯è¯** MCP é‡‡ç”¨ **MIT è®¸å¯è¯**ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹ **LICENSE æ–‡ä»¶**ã€‚

***
